function ChangeToSlide(n){var t=$("#slide"+n).first();$(".slideShowContainer:visible").fadeOut();$(".slideShowBox").css("background-color","#b4b4b4");$("#slideShowPage"+n).css("background-color","#ff0000");t.fadeIn()}function AutoRoll(){var t=$(".slideShowContainer").length,n=0;return ChangeToSlide(0),setInterval(function(){n++;n===t&&(n=0);ChangeToSlide(n)},5e3)}function HideSlideshow(n){clearInterval(n);$(".inner").fadeOut()}function AddToCart(n){if(n.Count==0){localStorage.removeItem("c."+n.Id);return}localStorage.setItem("c."+n.Id,JSON.stringify(n))}function AddComboToCart(n,t){return AddComboId(t)?(localStorage.setItem(t,JSON.stringify(n)),!0):!1}function UpdateComboOnCart(n,t){var i=localStorage.getItem(t);i!==null&&i!==undefined&&localStorage.setItem(t,JSON.stringify(n))}function RemoveComboItem(n){var t=JSON.parse(localStorage.getItem("combo")),r,i;if(t!==null&&t!==undefined){for(r=[],i=0;i<t.length;i++)n!==t[i]&&r.push(t[i]);return r.length>0?localStorage.setItem("combo",JSON.stringify(r)):localStorage.removeItem("combo"),localStorage.removeItem(n),!0}return!1}function GetComboFromCart(n){var t=localStorage.getItem(n);return t===null||t===undefined?null:JSON.parse(t)}function AddComboId(n){var t=JSON.parse(localStorage.getItem("combo")),r,i;if(t===null||t===undefined)r=new Array(n),localStorage.setItem("combo",JSON.stringify(r));else{for(i=0;i<t.length;i++)if(t[i]==n)return!1;t.push(n);localStorage.setItem("combo",JSON.stringify(t))}return!0}function GetAllComboIds(){var n=localStorage.getItem("combo");return n===null||n===undefined?[]:JSON.parse(n)}function GetCart(){for(var n,i=[],t=0;t<localStorage.length;t++)n=GetFromCart(localStorage.key(t)),n!==null&&n!==undefined&&i.push(n);return i}function GetFromCart(n){return n.toString().substring(0,2)!=="c."&&(n="c."+n),JSON.parse(localStorage.getItem(n))}function GetCartCount(){var n=localStorage.getItem("Cart.Count");return n===null?0:n}function SaveCartCount(n){localStorage.setItem("Cart.Count",n)}function CartItem(n,t,i){var r=this,f,e,o,s,u;for(r.Id=i,r.Item=new Cart(n),r.Name=ko.observable(n.Name),r.Number=ko.observable(n.Number),r.Price=ko.observable(n.Price),r.Count=ko.observable(t),r.ZCount=ko.observable(0),r.PicturePath=ko.observable(n.PicturePath),r.oldCount=parseInt(0),r.TotalCount=ko.observable(0),r.Weight=ko.observable(n.Weight||"***"),r.ModifierGroups=ko.observableArray(),r.Childs=ko.observableArray(),r.Index=ko.observable(0),f=0,e=GetCart(),u=0;u<e.length;u++)e[u].Item.Number==r.Number()&&(f+=parseInt(e[u].Count));for(r.oldCount=f,r.TotalCount=ko.observable(f),r.countTotalCount=function(){for(var t=0,i=GetCart(),n=0;n<i.length;n++)i[n].Item.Number==r.Number()&&(t+=parseInt(i[n].Count));r.TotalCount(parseInt(t));r.oldCount=parseInt(t)},r.setCount=function(n){var i,t,u,f,o,s,e;if(isNumeric(n)){if(n.substring(0,1)==="0"){BasketController.removeAllItemByNumber(r.Number());r.countTotalCount();categoryController.renderCartItemsInBasket();return}if(i=parseInt(n),t=parseInt(r.oldCount),i>t)u=i-t,f=BasketController.getBasketItemByNumber(r.Number()),f?BasketController.increaseCartItemAmount(f.Id,u):(o=r.getModIds(),BasketController.addCartItem(r.Number().toString(),u.toString(),o));else if(i<t)for(s=t-n,e=0;e<s;e++)BasketController.removeItemByNumber(r.Number());r.countTotalCount();categoryController.renderCartItemsInBasket();return}r.oldCount===undefined?BasketController.removeAllItemByNumber(r.Number()):r.TotalCount(r.oldCount);r.countTotalCount();categoryController.renderCartItemsInBasket();return},r.getModIds=function(){for(var i,t=[],n=0;n<r.ModifierGroups().length;n++){for(i=0;i<r.ModifierGroups()[n].selectedModifiers().length;i++)t.push(r.ModifierGroups()[n].selectedModifiers()[i].Code);r.ModifierGroups()[n].selectedModifier&&t.push(r.ModifierGroups()[n].selectedModifier().Code)}return t.sort(),t},r.updateCounter=function(){r.countTotalCount()},r.incrementZCounter=function(){var n=r.ZCount();r.ZCount(n+1)},r.decrementZCounter=function(){var n=r.ZCount();r.ZCount(n-1)},r.setZCounter=function(n){r.ZCount(n)},r.hasChilds=function(){return r.Childs&&r.Childs().length>0},o=[],u=0;u<n.ModifierGroups.length;++u)o.push(new ModifierGroup(n.ModifierGroups[u]));if(r.ModifierGroups=ko.observableArray(o),s=[],n.Childs!==null&&n.Childs!==undefined&&n.Childs.length>0){for(u=0;u<n.Childs.length;++u)s.push(new CartItem(n.Childs[u],0,""));r.Childs=ko.observableArray(s)}r.ControlModifierGroups=function(){if(r.ModifierGroups)for(var n=0;n<r.ModifierGroups().length;n++)r.ModifierGroups()[n].ControlModifiers()}}function Cart(n){var t=this,r,u,i;for(t.Name=n.Name,t.Number=n.Number,t.Price=n.Price,t.PicturePath=n.PicturePath,t.Weight=n.Weight,t.IsCoupon=n.IsCoupon,t.Index=n.Index,t.IsDelivery=n.IsCoupon,t.Description=n.Description,t.ModifierGroups=ko.observableArray(),r=[],i=0;i<n.ModifierGroups.length;++i)r.push(new MG(n.ModifierGroups[i]));for(t.ModifierGroups=r.length>0?r:[],u=[],i=0;i<n.Childs.length;++i)u.push(new Cart(n.Childs[i]));t.Childs=u.length>0?u:[]}function MG(n){var t=this,i,u,r;for(t.Name=n.Name,t.MinimumSelected=n.MinimumSelected,t.MaximumSelected=n.MaximumSelected,t.ShowPopUp=n.ShowPopUp,i=[],u=n.Modifiers?n.Modifiers.length:0,r=0;r<u;++r)i.push(new M(n.Modifiers[r]));t.Modifiers=i.length>0?i:[]}function M(n){var t=this;t.Name=n.Name;t.Code=n.Code;t.Quantity=n.Quantity}function ModifierGroup(n){var t=this,r,u,i;for(t.Name=n.Name,t.MinimumSelected=n.MinimumSelected,t.MaximumSelected=n.MaximumSelected,r=[],u=n.Modifiers?n.Modifiers.length:0,i=0;i<u;++i)r.push(new Modifier(n.Modifiers[i]));t.Modifiers=ko.observableArray(r);t.setModifiers=function(n){for(var r=new Modifier(n),u=-1,i=0;i<t.selectedModifiers().length;i++)if(t.selectedModifiers()[i].Code===r.Code){u=i;break}if(u>=0)for(i=0;i<t.Modifiers().length;i++)t.Modifiers()[i].Code===r.Code&&(t.Modifiers()[i].IsChecked(!1),r.IsChecked(!1),t.selectedModifiers.remove(function(t){return t.Code==n.Code}));else for(i=0;i<t.Modifiers().length;i++)t.Modifiers()[i].Code===r.Code&&(t.Modifiers()[i].IsChecked(!0),t.selectedModifiers.push(r))};t.setModifier=function(n){for(var e=n,u=-1,f=-1,r,i=0;i<t.Modifiers().length;i++)t.Modifiers()[i].Code===e.Code&&(u=i,r=t.Modifiers()[i]),t.Modifiers()[i].Code==t.IsSelected()&&(f=i);u===f||(t.selectedModifier=ko.observable(r),t.IsSelected(r.Code))};t.ControlModifiers=function(){if(t.Modifiers)for(var n=0;n<t.Modifiers().length;n++)t.Modifiers()[n].Quantity>0&&t.MinimumSelected>0&&(t.IsSelected=ko.observable(t.Modifiers()[n].Code),t.selectedModifier=ko.observable(t.Modifiers()[n])),t.Modifiers()[n].Quantity>0&&t.MinimumSelected==0&&(t.selectedModifiers.push(t.Modifiers()[n]),t.Modifiers()[n].IsChecked(!0))};t.Modifiers().length>0&&t.MinimumSelected>0&&(t.IsSelected=ko.observable(t.Modifiers()[0].Code),t.selectedModifier=ko.observable(t.Modifiers()[0]));t.selectedModifiers=ko.observableArray()}function Modifier(n){var t=this;t.Name=n.Name;t.Code=n.Code;t.IsChecked=ko.observable(!1);t.Quantity=n.Quantity;t.DynamicQuantity=ko.computed(function(){return t.IsChecked()?1:0})}function CartViewModel(){var n=this;n.CartItems=ko.observableArray();n.ComboItems=ko.observableArray();n.PhoneNumber=ko.observable("");n.LastName=ko.observable("");n.House=ko.observable("");n.Building=ko.observable("");n.Entry=ko.observable("");n.Floor=ko.observable("");n.Apartments=ko.observable("");n.EntryCode=ko.observable("");n.StreetId=ko.observable("");n.CityId=ko.observable("");n.Streets=ko.observableArray([]);n.CityId.subscribe(function(t){$.ajax({type:"GET",url:"/Cart/Streets?cityId="+t,dataType:"json",success:function(t){n.Streets(t)}})});n.TypeId=ko.observable("");n.OrderSum=ko.observable("");n.ChangeSum=ko.observable("");n.Comment=ko.observable("");n.DeliveryTime=ko.observable("");n.OrderType=ko.observable();n.OrderTypeEntity=ko.observable();n.DeliveryType=ko.observable();n.PickupType=ko.observable();n.PaymentType=ko.observable("");n.IsAgreement=ko.observable("");n.BranchId=ko.observable("");n.RecaptchaResponse=ko.observable("");n.Hours=ko.observableArray();n.Minutes=ko.observableArray();n.Hour=ko.observable();n.Minute=ko.observable();n.setCartItems=function(){for(var e,o,i,s,u=GetCart(),r=[],f=0,t=0;t<u.length;t++)r.push(new CartItem(u[t].Item,u[t].Count)),f+=parseInt(r[t].Count()*r[t].Price());for(e=GetAllComboIds(),o=[],t=0;t<e.length;t++)i=GetComboFromCart(e[t]),i!==null&&i!==undefined&&(s=i.ComboItems[0].Item.Price+i.ComboItems[1].Item.Price,o.push({Price:s,Number:i.ParentNumber,Count:1,Left:new CartItem(i.ComboItems[0].Item,i.ComboItems[0].Item.Number),Right:new CartItem(i.ComboItems[1].Item,i.ComboItems[1].Item.Number)}),f+=s);n.OrderSum(f);n.CartItems(r);n.ComboItems(o)};n.setRecaptchaResponse=function(t){n.RecaptchaResponse(t)};n.setEmptyBasket=function(){for(var t,i=GetCart(),n=0;n<i.length;n++)BasketController.removeExactCartItem(i[n].Id);for(t=GetAllComboIds(),n=0;n<t.length;n++)RemoveComboItem(t[n]);categoryController.renderCartItemsInBasket2()};n.InitializeOrderTypes=function(t){t.length>1&&(n.DeliveryType(new OrderType(t[0],"Доставить через")),n.PickupType(new OrderType(t[1],"Забрать через")));n.OrderType("delivery")};n.SetTime=function(t){for(var r=t().getHour(),e=t().getMinute(),u=[],f=[],i=r;i<8;i++)u.push(i);for(i=0;i<60;i++)f.push(i);n.Hours(u);n.Minutes(f);n.Minute(e);n.Hour(r)};n.CurrentOrderType=ko.computed(function(){return n.OrderType()===undefined||n.OrderType()===null?null:n.OrderType()==="delivery"?(n.OrderTypeEntity(n.DeliveryType()),n.SetTime(n.DeliveryType),n.DeliveryType()):(n.OrderTypeEntity(n.PickupType()),n.SetTime(n.PickupType),n.PickupType())});n.CheckTime=ko.computed(function(){return n.OrderTypeEntity()===undefined||n.OrderTypeEntity()===null?null:(n.OrderTypeEntity().getAllMinute()>n.Hour()*60+n.Minute()&&(n.Hour(n.OrderTypeEntity().getHour()),n.Minute(n.OrderTypeEntity().getMinute())),null)});n.GetMinimalSum=function(){return n.OrderTypeEntity().MinimalSum}}function OrderType(n,t){var i=this;i.Name=n.Name;i.Id=n.Id;i.MinimalSum=n.MinimalSum;i.DeliveryTime=n.DeliveryTime;i.Preparationtime=n.Preparationtime;i.ProcessingTime=n.ProcessingTime;i.DisplayName=t;i.getHour=function(){return Math.floor((i.DeliveryTime+i.Preparationtime+i.ProcessingTime)/60)};i.getMinute=function(){return(i.DeliveryTime+i.Preparationtime+i.ProcessingTime)%60};i.getAllMinute=function(){return i.DeliveryTime+i.Preparationtime+i.ProcessingTime}}function ResponseViewModel(){var n=this;n.OrderNumber=ko.observable("");n.Name=ko.observable("");n.Telephone=ko.observable("");n.Name=ko.observable("");n.DeliveryAddress=ko.observable("");n.OrderType=ko.observable("");n.OrderSum=ko.observable("");n.ChangeSum=ko.observable("");n.Change=ko.observable("");n.Comment=ko.observable("");n.DeliveryTime=ko.observable("");n.Discount=ko.observable("");n.setResponses=function(t){n.OrderNumber=ko.observable(t.orderNumber);n.Telephone=ko.observable(t.telephone);n.Name=ko.observable(t.name);n.DeliveryAddress=ko.observable(t.deliveryAddress);n.OrderType=ko.observable(t.orderType);n.OrderSum=ko.observable(t.orderSum);n.ChangeSum=ko.observable(t.changeSum);n.Change=ko.observable(t.change);n.Comment=ko.observable(t.comment);n.DeliveryTime=ko.observable(t.deliveryTime);n.Discount=ko.observable(t.discount)}}function CategoryViewModel(n){var t=this,r,f,e,u,i;if(t.Filters=ko.observableArray([new Filter("По умолчанию...",0),new Filter("Цене: Дешевые ВЫШЕ",1),new Filter("Цене: Дорогие ВЫШЕ",2),new Filter("Алфавиту: от А до Я",3),new Filter("Алфавиту: от Я до А",4)]),t.selectedFilter=ko.observable(t.Filters()[0]),t.leftChildIndex=ko.observable(0),t.rightChildIndex=ko.observable(0),t.ParentItem=ko.observable(),t.IsSingle=ko.observable(!0),r=[],n){for(i=0;i<n.length;i++)f=GetFromCart(n[i].Number),e=f?f.Count:0,r.push(new CartItem(n[i],e));t.Items=ko.observableArray(r)}else{for(u=GetCart(),i=0;i<u.length;i++){var o=u[i],h=o?o.Count:0,s=new CartItem(u[i].Item,h,u[i].Id);s.ControlModifierGroups();r.push(s)}t.Items=ko.observableArray(r)}t.refresh=function(){for(var i=GetCart(),r=[],n=0;n<i.length;n++){var u=i[n],e=u?u.Count:0,f=new CartItem(i[n].Item,e,i[n].Id);f.ControlModifierGroups();r.push(f)}t.Items=ko.observableArray(r)};t.CurrentItem=ko.observable();t.HalfItemsL=ko.observableArray();t.HalfItemsR=ko.observableArray();t.LeftItem=ko.observable();t.RightItem=ko.observable();t.AccessableSingle=ko.computed(function(){return t.CurrentItem});t.AccessableBoth=ko.computed(function(){return t.HalfItemsL&&t.HalfItemsR&&t.LeftItem&&t.RightItem});t.setInputCount=function(n,i){var e=BasketController.isToPopUp(n),u,f,r;if(e)u=t.getItemById(n),t.setCurrentItem(u),f=$("body"),f.toggleClass("is-modal"),t.setCurrentItemCount(parseInt(i));else for(r=0;r<t.Items().length;r++)if(t.Items()[r].Number()==n){t.Items()[r].setCount(i);return}};t.sortedItems=ko.computed(function(){var i=t.selectedFilter(),n=t.Items().slice();switch(i.Id){case 1:return n.sort(function(n,t){return n.Item.Price==t.Item.Price?0:n.Item.Price<t.Item.Price?-1:1});case 2:return n.sort(function(n,t){return t.Item.Price==n.Item.Price?0:t.Item.Price<n.Item.Price?-1:1});case 3:return n.sort(function(n,t){return n.Item.Name==t.Item.Name?0:n.Item.Name<t.Item.Name?-1:1});case 4:return n.sort(function(n,t){return t.Item.Name==n.Item.Name?0:t.Item.Name<n.Item.Name?-1:1});default:return n}});t.setCurrentItem=function(n){var f,e,i,r,u;if(n.Childs()&&n.Childs().length>0){if(t.IsSingle(!1),t.ParentItem(n),!(t.HalfItemsL().length>0&&t.HalfItemsR().length>0)){for(f=[],e=[],i=0;i<n.Childs().length;i++)f.push(new CartItem(n.Childs()[i].Item,0,n.Childs()[i].Id)),e.push(new CartItem(n.Childs()[i].Item,0,n.Childs()[i].Id));t.HalfItemsL(f);t.HalfItemsR(e)}if(t.LeftItem(t.HalfItemsL()[t.leftChildIndex()]),t.RightItem(t.HalfItemsR()[t.rightChildIndex()]),r=$(".c-popup__slider--l"),u=$(".c-popup__slider--r"),r!=undefined){r.not(".slick-initialized").length<=0&&(r.slick("unslick"),u.slick("unslick"));r.not(".slick-initialized").slick({dots:!1,vertical:!0,slidesToShow:1,slidesToScroll:1,verticalSwiping:!0,swipeToSlide:!0});u.not(".slick-initialized").slick({dots:!1,vertical:!0,slidesToShow:1,slidesToScroll:1,verticalSwiping:!0,swipeToSlide:!0});r.slick("refresh");u.slick("refresh");r.on("beforeChange",function(n,i,r,u){t.LeftItem(t.HalfItemsL()[u])});u.on("beforeChange",function(n,i,r,u){t.RightItem(t.HalfItemsR()[u])})}}else t.IsSingle(!0),t.CurrentItem(n)};t.setCurrentItemInCart=function(n,i,r){if(i)t.CurrentItem(n);else{var u=new CartItem(n.ComboItems[0].Item,0,n.ComboItems[0].Id),f=new CartItem(n.ComboItems[1].Item,0,n.ComboItems[1].Id);u.ControlModifierGroups();f.ControlModifierGroups();t.LeftItem(u);t.RightItem(f);t.ParentItem({Name:n.ParentName,PicturePath:n.ParentPicturePath,Id:n.ParentNumber});r===!0?t.CurrentItem(t.LeftItem()):t.CurrentItem(t.RightItem())}t.IsSingle(i)};t.setCurrentItemCount=function(n){t.CurrentItem()&&t.CurrentItem().ZCount(n)};t.getItemById=function(n){for(var i=0;i<t.Items().length;i++)if(t.Items()[i].Number()==n)return t.Items()[i];return null};t.IsCurrentItemExist=function(){return t.CurrentItem?!0:!1};t.getExactItem=function(n){for(var i=0;i<t.Items().length;i++)if(t.Items()[i].Id.toString()===n)return t.Items()[i];return null};t.getExactComboItem=function(n){return GetComboFromCart(n)};t.getModifierIds=function(n){var r=t.getItemById(n),u=[],i,f;if(r){for(i=0;i<r.ModifierGroups().length;i++){for(f=0;f<r.ModifierGroups()[i].selectedModifiers().length;f++)u.push(r.ModifierGroups()[i].selectedModifiers()[f].Code);r.ModifierGroups()[i].selectedModifier&&u.push(r.ModifierGroups()[i].selectedModifier().Code)}u.sort()}return u};t.getExactModifierIds=function(n){var r=t.getExactItem(n),u=[],i,f;if(r){for(i=0;i<r.ModifierGroups().length;i++){for(f=0;f<r.ModifierGroups()[i].selectedModifiers().length;f++)u.push(r.ModifierGroups()[i].selectedModifiers()[f].Code);r.ModifierGroups()[i].selectedModifier&&u.push(r.ModifierGroups()[i].selectedModifier().Code)}u.sort()}return u}}function isNumeric(n){return!isNaN(parseFloat(n))&&isFinite(n)}function GetMenuItem(n){for(var t=0;t<context.length;t++)if(context[t].Number==n)return context[t];return null}function MenuItemModel(n,t,i,r,u,f,e){this.Number=n;this.Name=t;this.IsCoupon=i;this.IsDelivery=r;this.PicturePath=u;this.Price=f;this.Description=e}var Filter,context;$(document).ready(function(){var n,t;$(".slider").mCustomScrollbar({setWidth:"1110px",setHeight:"150px",theme:"dark",axis:"x",scrollButtons:{enable:!1},advanced:{extraDraggableSelectors:".mCSB_buttonLeft"}});$(".content.container").height()<=$(window).height()-190&&$(".footer").css({position:"absolute"});$(".mCustomScrollBox").before('<i class="btnLeft">&#8249;<\/i>');$(".mCustomScrollBox").after('<i class="btnRight">&#8250;<\/i>');$(".btnRight").mouseover(function(){n=setInterval(function(){$(".slider").mCustomScrollbar("scrollTo","-=15",{scrollInertia:0})},1)});$(".btnRight").mouseout(function(){clearInterval(n)});$(".btnLeft").mouseover(function(){t=setInterval(function(){$(".slider").mCustomScrollbar("scrollTo","+=15",{scrollInertia:0})},1)});$(".btnLeft").mouseout(function(){clearInterval(t)});$(window).width()>640?$("meta").attr("name","viewport").attr("content","width=device-width, initial-scale=1.0").appendTo("head"):(console.log("less"),$("meta").attr("name","viewport").attr("content","width=device-width, initial-scale=1.0").appendTo("head"));$(".content-my").css({"min-height":$(".cart-list-1").height()+$(".cart-list-2").height()+$(".wrapper").height()})});var Utilities=function(){var n=function(n){return typeof n!=typeof undefined&&n!==!1};return{isObjectExists:n}}(),BasketController=function(){function rt(n,t){return n+""+t.join("_")}function e(n,t){return n+"_"+t}var n=[],o=function(t){for(var r,u,i=0;i<t.length;i++)r=GetFromCart(t[i].Number),u=0,r&&r.Count&&(u=r.Count),n.push({Item:t[i],Count:u,Id:""})},s=function(){for(var i,u,r=GetCart(),t=0;t<r.length;t++)i=r[t],u=0,i&&i.Count&&(u=i.Count),n.push({Item:r[t].Item,Count:u,Id:""})},i=function(t,i,r){var e=rt(t,r||[]),u=GetFromCart(e),f;if(!u)for(f=0;f<n.length;++f)if(n[f].Item.Number.toString()===t){u=n[f];u.Count=0;break}u.Count+=parseInt(i);u.Item=it(u,r||[]);u.Id=e;AddToCart(u)},h=function(n,i,r,u,f){var o;if(n.Number()===i.Number())return!1;o=[n.Number(),i.Number()];o.sort(function(n,t){return n==t?0:n<t?-1:1});var s=e(o[0],o[1]),h=t(n),c=t(i),l=[h,c],a={Count:1,ComboItems:l,Id:s,ParentPicturePath:r,ParentName:u,ParentNumber:f};return AddComboToCart(a,s)},c=function(n,i,r,u,f){var o=[n.Number(),i.Number()];o.sort(function(n,t){return n==t?0:n<t?-1:1});var s=e(o[0],o[1]),h=t(n),c=t(i),l=[h,c],a={Count:1,ComboItems:l,Id:s,ParentPicturePath:r,ParentName:u,ParentNumber:f};UpdateComboOnCart(a,s)},l=function(n,t){var i=GetFromCart(n);i.Count+=t||1;AddToCart(i)},a=function(n,t){var i=GetFromCart(n);i.Count-=t||1;i.Count<0&&(i.Count=0);AddToCart(i)},v=function(n,t){var r=GetFromCart(n);r?(r.Count=t||0,r.Count<0&&(r.Count=0),AddToCart(r)):i(n,t)},r=function(n){var t=GetFromCart(n);t&&t.Count>0&&(--t.Count,AddToCart(t))},y=function(n){var i=GetCart(),t;if(i)for(t=0;t<i.length;t++)if(i[t].Item.Number==n)return r(i[t].Id),i[t].Id;return null},u=function(n){var t=GetFromCart(n);t&&t.Count>0&&(t.Count=0,AddToCart(t))},p=function(n){RemoveComboItem(n)},w=function(n){var i=GetCart(),t;if(i)for(t=0;t<i.length;t++)i[t].Item.Number==n&&u(i[t].Id)},b=function(){var u=GetCart(),i=0,r,t,n;for(u.forEach(function(n){i+=n.Item.Price*n.Count}),r=GetAllComboIds(),t=0;t<r.length;t++)n=GetComboFromCart(r[t]),n!==null&&n!==undefined&&(i+=n.ComboItems[0].Item.Price+n.ComboItems[1].Item.Price);return i},f=function(){return GetCart()},k=function(){for(var r,t=GetCart(),i=[],u=[],n=0;n<t.length;n++)r=u.indexOf(t[n].Item.Number),r>-1?i[r].Count+=parseInt(t[n].Count):(i.push(t[n]),u.push(t[n].Item.Number));return i},d=function(){for(var n,i=GetAllComboIds(),r=[],t=0;t<i.length;t++)n=GetComboFromCart(i[t]),n!==null&&n!==undefined&&r.push({ItemL:n.ComboItems[0].Item,ItemR:n.ComboItems[1].Item,Id:n.Id,ParentPicturePath:n.ParentPicturePath,ParentName:n.ParentName,ParentNumber:n.Id});return r},g=function(t){for(var i=0;i<n.length;i++)if(n[i].Item.Number==t)return n[i].Item},nt=function(n){for(var i=GetCart(),t=0;t<i.length;t++)if(i[t].Item.Number==n)return i[t]},tt=function(t){for(var u,e=f(),r=!0,i=0;i<e.length;i++)if(e[i].Item.Number==t){r=!1;break}if(r){for(r=!1,i=0;i<n.length;i++)if(n[i].Item.Number==t){u=n[i].Item;break}if(u)for(i=0;i<u.ModifierGroups.length;i++)if(u.ModifierGroups[i].MinimumSelected>0&&u.ModifierGroups[i].MaximumSelected>0){r=!0;break}}return r},it=function(n,t){for(var f,u,i=n.Item,r=0;r<i.ModifierGroups.length;++r)for(f=i.ModifierGroups[r].Modifiers?i.ModifierGroups[r].Modifiers.length:0,u=0;u<f;++u)i.ModifierGroups[r].Modifiers[u].Quantity=0,t.indexOf(i.ModifierGroups[r].Modifiers[u].Code)>=0&&(i.ModifierGroups[r].Modifiers[u].Quantity=1);return i},t=function(n){for(var u,r,t=n,i=0;i<t.ModifierGroups().length;++i)for(u=t.ModifierGroups()[i].Modifiers()?t.ModifierGroups()[i].Modifiers().length:0,r=0;r<u;++r)t.Item.ModifierGroups[i].Modifiers[r].Quantity=t.ModifierGroups()[i].Modifiers()[r].DynamicQuantity();return t};return{init:o,init2:s,getCartItems:f,addCartItem:i,addComboCartItem:h,increaseCartItemAmount:l,decreaseCartItemAmount:a,setCartItemAmount:v,removeCartItem:r,removeExactCartItem:u,removeComboCartItem:p,calcBasketPrice:b,isToPopUp:tt,getItemByNumber:g,getComboCartItems:d,removeItemByNumber:y,getOnesCartItems:k,removeAllItemByNumber:w,getBasketItemByNumber:nt,updateComboCartItem:c}}(),categoryController=function(n,t){var s,i,r,h,o,c,l,a,v,u,k=function(t,r,e,l,y,p,w){s=t;o=l;c=y;a=p;h=e;v=w;u=r;n.init(s);i=new CategoryViewModel(s);g();tt(r);f()},d=function(t,i,f,s){o=f;l=s;h=i;u=t;n.init2();r=new CategoryViewModel;nt();it(u);e()},g=function(){ko.applyBindings(i,u.getElementById(c));ko.applyBindings(i,u.getElementById(a));ko.applyBindings(i,u.getElementById(v));window.context=s},nt=function(){ko.applyBindings(r,u.getElementById(l))},tt=function(n){y(n);p(n);ct(n);rt(n);at(n);ht(n);ut(n)},it=function(n){y(n);p(n);vt(n);yt(n);ft(n);et(n);ot(n);st(n)},rt=function(r){$(r).on("click",".js-cartItem-addToBasket",function(r){var e,o,s,u;if(r.preventDefault(),e=$(r.target).attr("dataId"),o=$(r.target).attr("dataCount"),t.isObjectExists(e))for(s=i.getModifierIds(e),n.addCartItem(e,o,s),f(),u=0;u<i.Items().length;u++)i.Items()[u].Number().toString()===e&&(i.Items()[u].updateCounter(),i.Items()[u].ZCount(0))})},ut=function(t){$(t).on("click",".js-cartItem-comboToBasket",function(t){t.preventDefault();var r=n.addComboCartItem(i.LeftItem(),i.RightItem(),i.ParentItem().PicturePath(),i.ParentItem().Name(),i.ParentItem().Item.Number);r&&($("body").toggleClass("is-popup"),f())})},y=function(u){$(u).on("click",".btn-increase",function(u){var s,l,a,h,c,v,y,o;if(u.preventDefault(),s=$(u.target).attr("dataId"),t.isObjectExists(s))if(t.isObjectExists(i))if(l=n.isToPopUp(s),l)b(s),a=$("body"),a.toggleClass("is-modal"),i.setCurrentItemCount(1);else{for(h=n.getCartItems(),c=!1,o=0;o<h.length;o++)if(h[o].Item.Number==s){v=h[o].Id;c=!0;break}if(c?n.increaseCartItemAmount(v,1):(y=i.getModifierIds(s),n.addCartItem(s,1,y)),i!=null)for(o=0;o<i.Items().length;o++)i.Items()[o].Number()==s&&i.Items()[o].updateCounter();f()}else n.increaseCartItemAmount(s),r.refresh(),e()})},p=function(u){$(u).on("click",".btn-decrease",function(u){var o,h,s;if(u.preventDefault(),o=$(u.target).attr("dataId"),t.isObjectExists(o))if(t.isObjectExists(i)){if(h=n.removeItemByNumber(o),h)for(s=0;s<i.Items().length;s++)if(i.Items()[s].Number()==o){i.Items()[s].updateCounter();break}f()}else n.decreaseCartItemAmount(o),r.refresh(),e()})},ft=function(n){$(n).on("click",".btn-edit",function(n){n.preventDefault();var t=$(n.target).attr("dataId"),i=r.getExactItem(t);r.setCurrentItemInCart(i,!0)})},et=function(n){$(n).on("click",".btn-edit-combo",function(n){n.preventDefault();var u=$(n.target).attr("dataId"),t=$(n.target).attr("isLeft"),i=r.getExactComboItem(u.toString());(console.log(t),i!=null)&&r.setCurrentItemInCart(i,!1,t.toString()==="true"?!0:!1)})},ot=function(t){$(t).on("click",".js-edited-save",function(t){var f;t.preventDefault();var i=$(t.target).attr("dataId"),u=$(t.target).attr("dataCount"),o=$(t.target).attr("dataNumber");n.decreaseCartItemAmount(i,u);f=r.getExactModifierIds(i);n.addCartItem(o,u,f);r.refresh();e()})},st=function(t){$(t).on("click",".js-edited-combo-save",function(t){t.preventDefault();n.updateComboCartItem(r.LeftItem(),r.RightItem(),r.ParentItem().PicturePath,r.ParentItem().Name,i.ParentItem().Id);e()})},ht=function(n){$(n).on("click",".js-close__modifs",function(n){var r,t;if(n.preventDefault(),r=$(n.target).attr("dataId"),i!=null)for(t=0;t<i.Items().length;t++)i.Items()[t].Number()==r&&(i.Items()[t].updateCounter(),i.Items()[t].ZCount(0));f()})},ct=function(t){$(t).on("click",".js-addItemToBasket",function(t){t.preventDefault();var u=i.CurrentItem().Id,e=i.CurrentItem().Number(),o=i.CurrentItem().ModifierGroups(),r=i.CurrentItem().Count();n.decreaseCartItemAmount(u,r);lt(e,o,r);f();pt()})},lt=function(t,i,r){for(var o,s,f,e=[],u=0;u<i.length;++u)for(o=i[u].selectedModifier(),o&&e.push(o.Code),s=i[u].selectedModifiers(),f=0;f<s.length;++f)e.push(s[f].Code);n.addCartItem(t,e,r)},at=function(n){$(n).on("click",".js-item-name",function(n){n.preventDefault();var t=$(n.target).attr("dataId");b(t)})},vt=function(t){$(t).on("click",".c-orders__delete",function(t){t.preventDefault();var i=$(t.target).attr("dataId");n.removeExactCartItem(i);e()})},yt=function(t){$(t).on("click",".c-orders-combo__delete",function(t){t.preventDefault();var i=$(t.target).attr("dataId");n.removeComboCartItem(i);e()})},f=function(){var t={cartItems:n.getOnesCartItems(),comboCartItems:n.getComboCartItems()};ko.cleanNode(document.getElementById(o));ko.applyBindings(t,u.getElementById(o));w()},e=function(){var t={cartItems:n.getCartItems(),comboCartItems:n.getComboCartItems()};ko.cleanNode(document.getElementById(o));ko.applyBindings(t,u.getElementById(o));w()},w=function(){var t=n.calcBasketPrice();$(h).html(t+" сом")},b=function(n){var t=i.getItemById(n);i.setCurrentItem(t)},pt=function(){window.location.href="#"};return{init:k,init2:d,renderCartItemsInBasket:f,renderCartItemsInBasket2:e}}(BasketController,Utilities);Filter=function(n,t){var i=this;i.Name=n;i.Id=t};!function(n){"function"==typeof define&&define.amd?define(["jquery"],n):"object"==typeof exports?module.exports=n:n(jQuery)}(function(n){function u(r){var u=r||window.event,w=c.call(arguments,1),l=0,s=0,e=0,a=0,b=0,k=0,v,y,p;if(r=n.event.fix(u),r.type="mousewheel","detail"in u&&(e=-1*u.detail),"wheelDelta"in u&&(e=u.wheelDelta),"wheelDeltaY"in u&&(e=u.wheelDeltaY),"wheelDeltaX"in u&&(s=-1*u.wheelDeltaX),"axis"in u&&u.axis===u.HORIZONTAL_AXIS&&(s=-1*e,e=0),l=0===e?s:e,"deltaY"in u&&(e=-1*u.deltaY,l=e),"deltaX"in u&&(s=u.deltaX,0===e&&(l=-1*s)),0!==e||0!==s)return 1===u.deltaMode?(v=n.data(this,"mousewheel-line-height"),l*=v,e*=v,s*=v):2===u.deltaMode&&(y=n.data(this,"mousewheel-page-height"),l*=y,e*=y,s*=y),(a=Math.max(Math.abs(e),Math.abs(s)),(!t||t>a)&&(t=a,o(u,a)&&(t/=40)),o(u,a)&&(l/=40,s/=40,e/=40),l=Math[l>=1?"floor":"ceil"](l/t),s=Math[s>=1?"floor":"ceil"](s/t),e=Math[e>=1?"floor":"ceil"](e/t),i.settings.normalizeOffset&&this.getBoundingClientRect)&&(p=this.getBoundingClientRect(),b=r.clientX-p.left,k=r.clientY-p.top),r.deltaX=s,r.deltaY=e,r.deltaFactor=t,r.offsetX=b,r.offsetY=k,r.deltaMode=0,w.unshift(r,l,s,e),f&&clearTimeout(f),f=setTimeout(h,200),(n.event.dispatch||n.event.handle).apply(this,w)}function h(){t=null}function o(n,t){return i.settings.adjustOldDeltas&&"mousewheel"===n.type&&t%120==0}var f,t,s=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],r="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],c=Array.prototype.slice,e,i;if(n.event.fixHooks)for(e=s.length;e;)n.event.fixHooks[s[--e]]=n.event.mouseHooks;i=n.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var t=r.length;t;)this.addEventListener(r[--t],u,!1);else this.onmousewheel=u;n.data(this,"mousewheel-line-height",i.getLineHeight(this));n.data(this,"mousewheel-page-height",i.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var t=r.length;t;)this.removeEventListener(r[--t],u,!1);else this.onmousewheel=null;n.removeData(this,"mousewheel-line-height");n.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var r=n(t),i=r["offsetParent"in n.fn?"offsetParent":"parent"]();return i.length||(i=n("body")),parseInt(i.css("fontSize"),10)||parseInt(r.css("fontSize"),10)||16},getPageHeight:function(t){return n(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};n.fn.extend({mousewheel:function(n){return n?this.bind("mousewheel",n):this.trigger("mousewheel")},unmousewheel:function(n){return this.unbind("mousewheel",n)}})});!function(n){"function"==typeof define&&define.amd?define(["jquery"],n):"object"==typeof exports?module.exports=n:n(jQuery)}(function(n){function u(r){var u=r||window.event,w=c.call(arguments,1),l=0,s=0,e=0,a=0,b=0,k=0,v,y,p;if(r=n.event.fix(u),r.type="mousewheel","detail"in u&&(e=-1*u.detail),"wheelDelta"in u&&(e=u.wheelDelta),"wheelDeltaY"in u&&(e=u.wheelDeltaY),"wheelDeltaX"in u&&(s=-1*u.wheelDeltaX),"axis"in u&&u.axis===u.HORIZONTAL_AXIS&&(s=-1*e,e=0),l=0===e?s:e,"deltaY"in u&&(e=-1*u.deltaY,l=e),"deltaX"in u&&(s=u.deltaX,0===e&&(l=-1*s)),0!==e||0!==s)return 1===u.deltaMode?(v=n.data(this,"mousewheel-line-height"),l*=v,e*=v,s*=v):2===u.deltaMode&&(y=n.data(this,"mousewheel-page-height"),l*=y,e*=y,s*=y),(a=Math.max(Math.abs(e),Math.abs(s)),(!t||t>a)&&(t=a,o(u,a)&&(t/=40)),o(u,a)&&(l/=40,s/=40,e/=40),l=Math[l>=1?"floor":"ceil"](l/t),s=Math[s>=1?"floor":"ceil"](s/t),e=Math[e>=1?"floor":"ceil"](e/t),i.settings.normalizeOffset&&this.getBoundingClientRect)&&(p=this.getBoundingClientRect(),b=r.clientX-p.left,k=r.clientY-p.top),r.deltaX=s,r.deltaY=e,r.deltaFactor=t,r.offsetX=b,r.offsetY=k,r.deltaMode=0,w.unshift(r,l,s,e),f&&clearTimeout(f),f=setTimeout(h,200),(n.event.dispatch||n.event.handle).apply(this,w)}function h(){t=null}function o(n,t){return i.settings.adjustOldDeltas&&"mousewheel"===n.type&&t%120==0}var f,t,s=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],r="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],c=Array.prototype.slice,e,i;if(n.event.fixHooks)for(e=s.length;e;)n.event.fixHooks[s[--e]]=n.event.mouseHooks;i=n.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var t=r.length;t;)this.addEventListener(r[--t],u,!1);else this.onmousewheel=u;n.data(this,"mousewheel-line-height",i.getLineHeight(this));n.data(this,"mousewheel-page-height",i.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var t=r.length;t;)this.removeEventListener(r[--t],u,!1);else this.onmousewheel=null;n.removeData(this,"mousewheel-line-height");n.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var r=n(t),i=r["offsetParent"in n.fn?"offsetParent":"parent"]();return i.length||(i=n("body")),parseInt(i.css("fontSize"),10)||parseInt(r.css("fontSize"),10)||16},getPageHeight:function(t){return n(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};n.fn.extend({mousewheel:function(n){return n?this.bind("mousewheel",n):this.trigger("mousewheel")},unmousewheel:function(n){return this.unbind("mousewheel",n)}})});!function(n){"function"==typeof define&&define.amd?define(["jquery"],n):"undefined"!=typeof module&&module.exports?module.exports=n:n(jQuery,window,document)}(function(n){!function(t){var i="function"==typeof define&&define.amd,r="undefined"!=typeof module&&module.exports,u="https:"==document.location.protocol?"https:":"http:";i||(r?require("jquery-mousewheel")(n):n.event.special.mousewheel||n("head").append(decodeURI("%3Cscript src="+u+"//cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.1.13/jquery.mousewheel.min.js%3E%3C/script%3E")));t()}(function(){var h,c="mCustomScrollbar",t="mCS",it=".mCustomScrollbar",ot={setTop:0,setLeft:0,axis:"y",scrollbarPosition:"inside",scrollInertia:950,autoDraggerLength:!0,alwaysShowScrollbar:0,snapOffset:0,mouseWheel:{enable:!0,scrollAmount:"auto",axis:"y",deltaFactor:"auto",disableOver:["select","option","keygen","datalist","textarea"]},scrollButtons:{scrollType:"stepless",scrollAmount:"auto"},keyboard:{enable:!0,scrollType:"stepless",scrollAmount:"auto"},contentTouchScroll:25,documentTouchScroll:!0,advanced:{autoScrollOnFocus:"input,textarea,select,button,datalist,keygen,a[tabindex],area,object,[contenteditable='true']",updateOnContentResize:!0,updateOnImageLoad:"auto",autoUpdateTimeout:60},theme:"light",callbacks:{onTotalScrollOffset:0,onTotalScrollBackOffset:0,alwaysTriggerOffsets:!0}},pt=0,b={},p=window.attachEvent&&!window.addEventListener?1:0,e=!1,i=["mCSB_dragger_onDrag","mCSB_scrollTools_onDrag","mCS_img_loaded","mCS_disabled","mCS_destroyed","mCS_no_scrollbar","mCS-autoHide","mCS-dir-rtl","mCS_no_scrollbar_y","mCS_no_scrollbar_x","mCS_y_hidden","mCS_x_hidden","mCSB_draggerContainer","mCSB_buttonUp","mCSB_buttonDown","mCSB_buttonLeft","mCSB_buttonRight"],s={init:function(r){var r=n.extend(!0,{},ot,r),e=v.call(this),u,f;if(r.live){if(u=r.liveSelector||this.selector||it,f=n(u),"off"===r.live)return void k(u);b[u]=setTimeout(function(){f.mCustomScrollbar(r);"once"===r.live&&f.length&&k(u)},500)}else k(u);return r.setWidth=r.set_width?r.set_width:r.setWidth,r.setHeight=r.set_height?r.set_height:r.setHeight,r.axis=r.horizontalScroll?"x":wt(r.axis),r.scrollInertia=r.scrollInertia>0&&r.scrollInertia<17?17:r.scrollInertia,"object"!=typeof r.mouseWheel&&1==r.mouseWheel&&(r.mouseWheel={enable:!0,scrollAmount:"auto",axis:"y",preventDefault:!1,deltaFactor:"auto",normalizeDelta:!1,invert:!1}),r.mouseWheel.scrollAmount=r.mouseWheelPixels?r.mouseWheelPixels:r.mouseWheel.scrollAmount,r.mouseWheel.normalizeDelta=r.advanced.normalizeMouseWheelDelta?r.advanced.normalizeMouseWheelDelta:r.mouseWheel.normalizeDelta,r.scrollButtons.scrollType=bt(r.scrollButtons.scrollType),st(r),n(e).each(function(){var u=n(this);if(!u.data(t)){u.data(t,{idx:++pt,opt:r,scrollRatio:{y:null,x:null},overflowed:null,contentReset:{y:null,x:null},bindEvents:!1,tweenRunning:!1,sequential:{},langDir:u.css("direction"),cbOffsets:null,trigger:null,poll:{size:{o:0,n:0},img:{o:0,n:0},change:{o:0,n:0}}});var e=u.data(t),f=e.opt,o=u.data("mcs-axis"),h=u.data("mcs-scrollbar-position"),c=u.data("mcs-theme");o&&(f.axis=o);h&&(f.scrollbarPosition=h);c&&(f.theme=c,st(f));kt.call(this);e&&f.callbacks.onCreate&&"function"==typeof f.callbacks.onCreate&&f.callbacks.onCreate.call(this);n("#mCSB_"+e.idx+"_container img:not(."+i[2]+")").addClass(i[2]);s.update.call(null,u)}})},update:function(r,f){var e=r||v.call(this);return n(e).each(function(){var s=n(this),c;if(s.data(t)){var e=s.data(t),r=e.opt,h=n("#mCSB_"+e.idx+"_container"),a=n("#mCSB_"+e.idx),l=[n("#mCSB_"+e.idx+"_dragger_vertical"),n("#mCSB_"+e.idx+"_dragger_horizontal")];if(!h.length)return;e.tweenRunning&&o(s);f&&e&&r.callbacks.onBeforeUpdate&&"function"==typeof r.callbacks.onBeforeUpdate&&r.callbacks.onBeforeUpdate.call(this);s.hasClass(i[3])&&s.removeClass(i[3]);s.hasClass(i[4])&&s.removeClass(i[4]);a.css("max-height","none");a.height()!==s.height()&&a.css("max-height",s.height());dt.call(this);"y"===r.axis||r.advanced.autoExpandHorizontalScroll||h.css("width",ht(h));e.overflowed=ii.call(this);ct.call(this);r.autoDraggerLength&&ni.call(this);ti.call(this);ri.call(this);c=[Math.abs(h[0].offsetTop),Math.abs(h[0].offsetLeft)];"x"!==r.axis&&(e.overflowed[0]?l[0].height()>l[0].parent().height()?y.call(this):(u(s,c[0].toString(),{dir:"y",dur:0,overwrite:"none"}),e.contentReset.y=null):(y.call(this),"y"===r.axis?g.call(this):"yx"===r.axis&&e.overflowed[1]&&u(s,c[1].toString(),{dir:"x",dur:0,overwrite:"none"})));"y"!==r.axis&&(e.overflowed[1]?l[1].width()>l[1].parent().width()?y.call(this):(u(s,c[1].toString(),{dir:"x",dur:0,overwrite:"none"}),e.contentReset.x=null):(y.call(this),"x"===r.axis?g.call(this):"yx"===r.axis&&e.overflowed[0]&&u(s,c[0].toString(),{dir:"y",dur:0,overwrite:"none"})));f&&e&&(2===f&&r.callbacks.onImageLoad&&"function"==typeof r.callbacks.onImageLoad?r.callbacks.onImageLoad.call(this):3===f&&r.callbacks.onSelectorChange&&"function"==typeof r.callbacks.onSelectorChange?r.callbacks.onSelectorChange.call(this):r.callbacks.onUpdate&&"function"==typeof r.callbacks.onUpdate&&r.callbacks.onUpdate.call(this));et.call(this)}})},scrollTo:function(i,r){if("undefined"!=typeof i&&null!=i){var f=v.call(this);return n(f).each(function(){var s=n(this);if(s.data(t)){var o=s.data(t),h=o.opt,c={trigger:"external",scrollInertia:h.scrollInertia,scrollEasing:"mcsEaseInOut",moveDragger:!1,timeout:60,callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},f=n.extend(!0,{},c,r),e=ft.call(this,i),l=f.scrollInertia>0&&f.scrollInertia<17?17:f.scrollInertia;e[0]=at.call(this,e[0],"y");e[1]=at.call(this,e[1],"x");f.moveDragger&&(e[0]*=o.scrollRatio.y,e[1]*=o.scrollRatio.x);f.dur=wi()?0:l;setTimeout(function(){null!==e[0]&&"undefined"!=typeof e[0]&&"x"!==h.axis&&o.overflowed[0]&&(f.dir="y",f.overwrite="all",u(s,e[0].toString(),f));null!==e[1]&&"undefined"!=typeof e[1]&&"y"!==h.axis&&o.overflowed[1]&&(f.dir="x",f.overwrite="none",u(s,e[1].toString(),f))},f.timeout)}})}},stop:function(){var i=v.call(this);return n(i).each(function(){var i=n(this);i.data(t)&&o(i)})},disable:function(r){var u=v.call(this);return n(u).each(function(){var u=n(this);u.data(t)&&(u.data(t),et.call(this,"remove"),g.call(this),r&&y.call(this),ct.call(this,!0),u.addClass(i[3]))})},destroy:function(){var r=v.call(this);return n(r).each(function(){var f=n(this);if(f.data(t)){var u=f.data(t),e=u.opt,s=n("#mCSB_"+u.idx),o=n("#mCSB_"+u.idx+"_container"),h=n(".mCSB_"+u.idx+"_scrollbar");e.live&&k(e.liveSelector||n(r).selector);et.call(this,"remove");g.call(this);y.call(this);f.removeData(t);a(this,"mcs");h.remove();o.find("img."+i[2]).removeClass(i[2]);s.replaceWith(o.contents());f.removeClass(c+" _"+t+"_"+u.idx+" "+i[6]+" "+i[7]+" "+i[5]+" "+i[3]).addClass(i[4])}})}},v=function(){return"object"!=typeof n(this)||n(this).length<1?it:this},st=function(t){t.autoDraggerLength=n.inArray(t.theme,["rounded","rounded-dark","rounded-dots","rounded-dots-dark"])>-1?!1:t.autoDraggerLength;t.autoExpandScrollbar=n.inArray(t.theme,["rounded-dots","rounded-dots-dark","3d","3d-dark","3d-thick","3d-thick-dark","inset","inset-dark","inset-2","inset-2-dark","inset-3","inset-3-dark"])>-1?!1:t.autoExpandScrollbar;t.scrollButtons.enable=n.inArray(t.theme,["minimal","minimal-dark"])>-1?!1:t.scrollButtons.enable;t.autoHideScrollbar=n.inArray(t.theme,["minimal","minimal-dark"])>-1?!0:t.autoHideScrollbar;t.scrollbarPosition=n.inArray(t.theme,["minimal","minimal-dark"])>-1?"outside":t.scrollbarPosition},k=function(n){b[n]&&(clearTimeout(b[n]),a(b,n))},wt=function(n){return"yx"===n||"xy"===n||"auto"===n?"yx":"x"===n||"horizontal"===n?"x":"y"},bt=function(n){return"stepped"===n||"pixels"===n||"step"===n||"click"===n?"stepped":"stepless"},kt=function(){var f=n(this),u=f.data(t),r=u.opt,l=r.autoExpandScrollbar?" "+i[1]+"_expand":"",o=["<div id='mCSB_"+u.idx+"_scrollbar_vertical' class='mCSB_scrollTools mCSB_"+u.idx+"_scrollbar mCS-"+r.theme+" mCSB_scrollTools_vertical"+l+"'><div class='"+i[12]+"'><div id='mCSB_"+u.idx+"_dragger_vertical' class='mCSB_dragger' style='position:absolute;'><div class='mCSB_dragger_bar' /><\/div><div class='mCSB_draggerRail' /><\/div><\/div>","<div id='mCSB_"+u.idx+"_scrollbar_horizontal' class='mCSB_scrollTools mCSB_"+u.idx+"_scrollbar mCS-"+r.theme+" mCSB_scrollTools_horizontal"+l+"'><div class='"+i[12]+"'><div id='mCSB_"+u.idx+"_dragger_horizontal' class='mCSB_dragger' style='position:absolute;'><div class='mCSB_dragger_bar' /><\/div><div class='mCSB_draggerRail' /><\/div><\/div>"],v="yx"===r.axis?"mCSB_vertical_horizontal":"x"===r.axis?"mCSB_horizontal":"mCSB_vertical",a="yx"===r.axis?o[0]+o[1]:"x"===r.axis?o[1]:o[0],y="yx"===r.axis?"<div id='mCSB_"+u.idx+"_container_wrapper' class='mCSB_container_wrapper' />":"",p=r.autoHideScrollbar?" "+i[6]:"",w="x"!==r.axis&&"rtl"===u.langDir?" "+i[7]:"",h,s,e;r.setWidth&&f.css("width",r.setWidth);r.setHeight&&f.css("height",r.setHeight);r.setLeft="y"!==r.axis&&"rtl"===u.langDir?"989999px":r.setLeft;f.addClass(c+" _"+t+"_"+u.idx+p+w).wrapInner("<div id='mCSB_"+u.idx+"' class='mCustomScrollBox mCS-"+r.theme+" "+v+"'><div id='mCSB_"+u.idx+"_container' class='mCSB_container' style='position:relative; top:"+r.setTop+"; left:"+r.setLeft+";' dir='"+u.langDir+"' /><\/div>");h=n("#mCSB_"+u.idx);s=n("#mCSB_"+u.idx+"_container");"y"===r.axis||r.advanced.autoExpandHorizontalScroll||s.css("width",ht(s));"outside"===r.scrollbarPosition?("static"===f.css("position")&&f.css("position","relative"),f.css("overflow","visible"),h.addClass("mCSB_outside").after(a)):(h.addClass("mCSB_inside").append(a),s.wrap(y));gt.call(this);e=[n("#mCSB_"+u.idx+"_dragger_vertical"),n("#mCSB_"+u.idx+"_dragger_horizontal")];e[0].css("min-height",e[0].height());e[1].css("min-width",e[1].width())},ht=function(t){var i=[t[0].scrollWidth,Math.max.apply(Math,t.children().map(function(){return n(this).outerWidth(!0)}).get())],r=t.parent().width();return i[0]>r?i[0]:i[1]>r?i[1]:"100%"},dt=function(){var e=n(this),f=e.data(t),r=f.opt,i=n("#mCSB_"+f.idx+"_container"),u;r.advanced.autoExpandHorizontalScroll&&"y"!==r.axis&&(i.css({width:"auto","min-width":0,"overflow-x":"scroll"}),u=Math.ceil(i[0].scrollWidth),3===r.advanced.autoExpandHorizontalScroll||2!==r.advanced.autoExpandHorizontalScroll&&u>i.parent().width()?i.css({width:u,"min-width":"100%","overflow-x":"inherit"}):i.css({"overflow-x":"inherit",position:"absolute"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:Math.ceil(i[0].getBoundingClientRect().right+.4)-Math.floor(i[0].getBoundingClientRect().left),"min-width":"100%",position:"relative"}).unwrap())},gt=function(){var s=n(this),o=s.data(t),u=o.opt,h=n(".mCSB_"+o.idx+"_scrollbar:first"),f=tt(u.scrollButtons.tabindex)?"tabindex='"+u.scrollButtons.tabindex+"'":"",r=["<a href='#' class='"+i[13]+"' "+f+" />","<a href='#' class='"+i[14]+"' "+f+" />","<a href='#' class='"+i[15]+"' "+f+" />","<a href='#' class='"+i[16]+"' "+f+" />"],e=["x"===u.axis?r[2]:r[0],"x"===u.axis?r[3]:r[1],r[2],r[3]];u.scrollButtons.enable&&h.prepend(e[0]).append(e[1]).next(".mCSB_scrollTools").prepend(e[2]).append(e[3])},ni=function(){var s=n(this),u=s.data(t),f=n("#mCSB_"+u.idx),e=n("#mCSB_"+u.idx+"_container"),r=[n("#mCSB_"+u.idx+"_dragger_vertical"),n("#mCSB_"+u.idx+"_dragger_horizontal")],o=[f.height()/e.outerHeight(!1),f.width()/e.outerWidth(!1)],i=[parseInt(r[0].css("min-height")),Math.round(o[0]*r[0].parent().height()),parseInt(r[1].css("min-width")),Math.round(o[1]*r[1].parent().width())],h=p&&i[1]<i[0]?i[0]:i[1],c=p&&i[3]<i[2]?i[2]:i[3];r[0].css({height:h,"max-height":r[0].parent().height()-10}).find(".mCSB_dragger_bar").css({"line-height":i[0]+"px"});r[1].css({width:c,"max-width":r[1].parent().width()-10})},ti=function(){var s=n(this),i=s.data(t),u=n("#mCSB_"+i.idx),f=n("#mCSB_"+i.idx+"_container"),r=[n("#mCSB_"+i.idx+"_dragger_vertical"),n("#mCSB_"+i.idx+"_dragger_horizontal")],e=[f.outerHeight(!1)-u.height(),f.outerWidth(!1)-u.width()],o=[e[0]/(r[0].parent().height()-r[0].height()),e[1]/(r[1].parent().width()-r[1].width())];i.scrollRatio={y:o[0],x:o[1]}},d=function(n,t,r){var f=r?i[0]+"_expanded":"",u=n.closest(".mCSB_scrollTools");"active"===t?(n.toggleClass(i[0]+" "+f),u.toggleClass(i[1]),n[0]._draggable=n[0]._draggable?0:1):n[0]._draggable||("hide"===t?(n.removeClass(i[0]),u.removeClass(i[1])):(n.addClass(i[0]),u.addClass(i[1])))},ii=function(){var h=n(this),r=h.data(t),e=n("#mCSB_"+r.idx),i=n("#mCSB_"+r.idx+"_container"),u=null==r.overflowed?i.height():i.outerHeight(!1),f=null==r.overflowed?i.width():i.outerWidth(!1),o=i[0].scrollHeight,s=i[0].scrollWidth;return o>u&&(u=o),s>f&&(f=s),[u>e.height(),f>e.width()]},y=function(){var r=n(this),i=r.data(t),f=i.opt,c=n("#mCSB_"+i.idx),s=n("#mCSB_"+i.idx+"_container"),h=[n("#mCSB_"+i.idx+"_dragger_vertical"),n("#mCSB_"+i.idx+"_dragger_horizontal")],e;(o(r),("x"!==f.axis&&!i.overflowed[0]||"y"===f.axis&&i.overflowed[0])&&(h[0].add(s).css("top",0),u(r,"_resetY")),"y"!==f.axis&&!i.overflowed[1]||"x"===f.axis&&i.overflowed[1])&&(e=dx=0,"rtl"===i.langDir&&(e=c.width()-s.outerWidth(!1),dx=Math.abs(e/i.scrollRatio.x)),s.css("left",e),h[1].css("left",dx),u(r,"_resetX"))},ri=function(){function u(){e=setTimeout(function(){n.event.special.mousewheel?(clearTimeout(e),oi.call(f[0])):u()},100)}var f=n(this),r=f.data(t),i=r.opt,e;r.bindEvents||((ui.call(this),i.contentTouchScroll&&fi.call(this),ei.call(this),i.mouseWheel.enable)&&u(),hi.call(this),li.call(this),i.advanced.autoScrollOnFocus&&ci.call(this),i.scrollButtons.enable&&ai.call(this),i.keyboard.enable&&vi.call(this),r.bindEvents=!0)},g=function(){var f=n(this),r=f.data(t),u=r.opt,o=t+"_"+r.idx,s=".mCSB_"+r.idx+"_scrollbar",e=n("#mCSB_"+r.idx+",#mCSB_"+r.idx+"_container,#mCSB_"+r.idx+"_container_wrapper,"+s+" ."+i[12]+",#mCSB_"+r.idx+"_dragger_vertical,#mCSB_"+r.idx+"_dragger_horizontal,"+s+">a"),h=n("#mCSB_"+r.idx+"_container");u.advanced.releaseDraggableSelectors&&e.add(n(u.advanced.releaseDraggableSelectors));u.advanced.extraDraggableSelectors&&e.add(n(u.advanced.extraDraggableSelectors));r.bindEvents&&(n(document).add(n(!l()||top.document)).unbind("."+o),e.each(function(){n(this).unbind("."+o)}),clearTimeout(f[0]._focusTimeout),a(f[0],"_focusTimeout"),clearTimeout(r.sequential.step),a(r.sequential,"step"),clearTimeout(h[0].onCompleteTimeout),a(h[0],"onCompleteTimeout"),r.bindEvents=!1)},ct=function(r){var h=n(this),u=h.data(t),o=u.opt,c=n("#mCSB_"+u.idx+"_container_wrapper"),f=c.length?c:n("#mCSB_"+u.idx+"_container"),e=[n("#mCSB_"+u.idx+"_scrollbar_vertical"),n("#mCSB_"+u.idx+"_scrollbar_horizontal")],s=[e[0].find(".mCSB_dragger"),e[1].find(".mCSB_dragger")];"x"!==o.axis&&(u.overflowed[0]&&!r?(e[0].add(s[0]).add(e[0].children("a")).css("display","block"),f.removeClass(i[8]+" "+i[10])):(o.alwaysShowScrollbar?(2!==o.alwaysShowScrollbar&&s[0].css("display","none"),f.removeClass(i[10])):(e[0].css("display","none"),f.addClass(i[10])),f.addClass(i[8])));"y"!==o.axis&&(u.overflowed[1]&&!r?(e[1].add(s[1]).add(e[1].children("a")).css("display","block"),f.removeClass(i[9]+" "+i[11])):(o.alwaysShowScrollbar?(2!==o.alwaysShowScrollbar&&s[1].css("display","none"),f.removeClass(i[11])):(e[1].css("display","none"),f.addClass(i[11])),f.addClass(i[9])));u.overflowed[0]||u.overflowed[1]?h.removeClass(i[5]):h.addClass(i[5])},r=function(t){var e=t.type,i=t.target.ownerDocument!==document&&null!==frameElement?[n(frameElement).offset().top,n(frameElement).offset().left]:null,u=l()&&t.target.ownerDocument!==top.document&&null!==frameElement?[n(t.view.frameElement).offset().top,n(t.view.frameElement).offset().left]:[0,0],r,f;switch(e){case"pointerdown":case"MSPointerDown":case"pointermove":case"MSPointerMove":case"pointerup":case"MSPointerUp":return i?[t.originalEvent.pageY-i[0]+u[0],t.originalEvent.pageX-i[1]+u[1],!1]:[t.originalEvent.pageY,t.originalEvent.pageX,!1];case"touchstart":case"touchmove":case"touchend":return r=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0],f=t.originalEvent.touches.length||t.originalEvent.changedTouches.length,t.target.ownerDocument!==document?[r.screenY,r.screenX,f>1]:[r.pageY,r.pageX,f>1];default:return i?[t.pageY-i[0]+u[0],t.pageX-i[1]+u[1],!1]:[t.pageY,t.pageX,!1]}},ui=function(){function k(n,t,r,f){var e,o;(w[0].idleTimer=h.scrollInertia<233?250:0,i.attr("id")===y[1])?(e="x",o=(i[0].offsetLeft-t+f)*s.scrollRatio.x):(e="y",o=(i[0].offsetTop-n+r)*s.scrollRatio.y);u(v,o.toString(),{dir:e,drag:!0})}var i,c,a,v=n(this),s=v.data(t),h=s.opt,f=t+"_"+s.idx,y=["mCSB_"+s.idx+"_dragger_vertical","mCSB_"+s.idx+"_dragger_horizontal"],w=n("#mCSB_"+s.idx+"_container"),b=n("#"+y[0]+",#"+y[1]),g=h.advanced.releaseDraggableSelectors?b.add(n(h.advanced.releaseDraggableSelectors)):b,nt=h.advanced.extraDraggableSelectors?n(!l()||top.document).add(n(h.advanced.extraDraggableSelectors)):n(!l()||top.document);b.bind("contextmenu."+f,function(n){n.preventDefault()}).bind("mousedown."+f+" touchstart."+f+" pointerdown."+f+" MSPointerDown."+f,function(t){if(t.stopImmediatePropagation(),t.preventDefault(),yt(t)){e=!0;p&&(document.onselectstart=function(){return!1});lt.call(w,!1);o(v);i=n(this);var u=i.offset(),f=r(t)[0]-u.top,s=r(t)[1]-u.left,l=i.height()+u.top,y=i.width()+u.left;l>f&&f>0&&y>s&&s>0&&(c=f,a=s);d(i,"active",h.autoExpandScrollbar)}}).bind("touchmove."+f,function(n){n.stopImmediatePropagation();n.preventDefault();var t=i.offset(),u=r(n)[0]-t.top,f=r(n)[1]-t.left;k(c,a,u,f)});n(document).add(nt).bind("mousemove."+f+" pointermove."+f+" MSPointerMove."+f,function(n){if(i){var t=i.offset(),u=r(n)[0]-t.top,f=r(n)[1]-t.left;if(c===u&&a===f)return;k(c,a,u,f)}}).add(g).bind("mouseup."+f+" touchend."+f+" pointerup."+f+" MSPointerUp."+f,function(){i&&(d(i,"active",h.autoExpandScrollbar),i=null);e=!1;p&&(document.onselectstart=null);lt.call(w,!0)})},fi=function(){function at(n){if(!nt(n)||e||r(n)[2])return void(h=0);h=1;it=0;rt=0;st=1;g.removeClass("mCS_touch_action");var t=b.offset();k=r(n)[0]-t.top;d=r(n)[1]-t.left;v=[r(n)[0],r(n)[1]]}function vt(n){var c,l,a,y;if(nt(n)&&!e&&!r(n)[2]&&(f.documentTouchScroll||n.preventDefault(),n.stopImmediatePropagation(),(!rt||it)&&st)){gt=w();var o=ut.offset(),t=r(n)[0]-o.top,u=r(n)[1]-o.left,h="mcsLinearOut";(et.push(t),ot.push(u),v[2]=Math.abs(r(n)[0]-v[0]),v[3]=Math.abs(r(n)[1]-v[1]),i.overflowed[0])&&(c=ft[0].parent().height()-ft[0].height(),l=k-t>0&&t-k>-(c*i.scrollRatio.y)&&(2*v[3]<v[2]||"yx"===f.axis));i.overflowed[1]&&(a=ft[1].parent().width()-ft[1].width(),y=d-u>0&&u-d>-(a*i.scrollRatio.x)&&(2*v[2]<v[3]||"yx"===f.axis));l||y?(ii||n.preventDefault(),it=1):(rt=1,g.addClass("mCS_touch_action"));ii&&n.preventDefault();s="yx"===f.axis?[k-t,d-u]:"x"===f.axis?[null,d-u]:[k-t,null];b[0].idleTimer=250;i.overflowed[0]&&tt(s[0],ni,h,"y","all",!0);i.overflowed[1]&&tt(s[1],ni,h,"x",lt,!0)}}function yt(n){if(!nt(n)||e||r(n)[2])return void(h=0);h=1;n.stopImmediatePropagation();o(g);dt=w();var t=ut.offset();bt=r(n)[0]-t.top;kt=r(n)[1]-t.left;et=[];ot=[]}function pt(n){var t,u,h;if(nt(n)&&!e&&!r(n)[2]){st=0;n.stopImmediatePropagation();it=0;rt=0;ht=w();var l=ut.offset(),a=r(n)[0]-l.top,v=r(n)[1]-l.left;if(!(ht-gt>30)){c=1e3/(ht-dt);var p="mcsEaseOut",o=2.5>c,k=o?[et[et.length-2],ot[ot.length-2]]:[0,0];y=o?[a-k[0],v-k[1]]:[a-bt,v-kt];t=[Math.abs(y[0]),Math.abs(y[1])];c=o?[Math.abs(y[0]/4),Math.abs(y[1]/4)]:[c,c];u=[Math.abs(b[0].offsetTop)-y[0]*wt(t[0]/c[0],c[0]),Math.abs(b[0].offsetLeft)-y[1]*wt(t[1]/c[1],c[1])];s="yx"===f.axis?[u[0],u[1]]:"x"===f.axis?[null,u[1]]:[u[0],null];ct=[4*t[0]+f.scrollInertia,4*t[1]+f.scrollInertia];h=parseInt(f.contentTouchScroll)||0;s[0]=t[0]>h?s[0]:0;s[1]=t[1]>h?s[1]:0;i.overflowed[0]&&tt(s[0],ct[0],p,"y",lt,!1);i.overflowed[1]&&tt(s[1],ct[1],p,"x",lt,!1)}}}function wt(n,t){var i=[1.5*t,2*t,t/1.5,t/2];return n>90?t>4?i[0]:i[3]:n>60?t>3?i[3]:i[2]:n>30?t>8?i[1]:t>6?i[0]:t>4?t:i[2]:t>8?t:i[3]}function tt(n,t,i,r,f,e){n&&u(g,n.toString(),{dur:t,scrollEasing:i,dir:r,overwrite:f,drag:e})}var st,k,d,bt,kt,dt,gt,ht,y,c,s,ct,it,rt,g=n(this),i=g.data(t),f=i.opt,a=t+"_"+i.idx,ut=n("#mCSB_"+i.idx),b=n("#mCSB_"+i.idx+"_container"),ft=[n("#mCSB_"+i.idx+"_dragger_vertical"),n("#mCSB_"+i.idx+"_dragger_horizontal")],et=[],ot=[],ni=0,lt="yx"===f.axis?"none":"all",v=[],ti=b.find("iframe"),p=["touchstart."+a+" pointerdown."+a+" MSPointerDown."+a,"touchmove."+a+" pointermove."+a+" MSPointerMove."+a,"touchend."+a+" pointerup."+a+" MSPointerUp."+a],ii=void 0!==document.body.style.touchAction&&""!==document.body.style.touchAction;b.bind(p[0],function(n){at(n)}).bind(p[1],function(n){vt(n)});ut.bind(p[0],function(n){yt(n)}).bind(p[2],function(n){pt(n)});ti.length&&ti.each(function(){n(this).bind("load",function(){l(this)&&n(this.contentDocument||this.contentWindow.document).bind(p[0],function(n){at(n);yt(n)}).bind(p[1],function(n){vt(n)}).bind(p[2],function(n){pt(n)})})})},ei=function(){function y(){return window.getSelection?window.getSelection().toString():document.selection&&"Control"!=document.selection.type?document.selection.createRange().text:0}function i(n,t,i){l.type=i&&u?"stepped":"stepless";l.scrollAmount=10;ut(a,n,t,"mcsLinearOut",i?60:null)}var u,a=n(this),f=a.data(t),v=f.opt,l=f.sequential,s=t+"_"+f.idx,o=n("#mCSB_"+f.idx+"_container"),c=o.parent();o.bind("mousedown."+s,function(){h||u||(u=1,e=!0)}).add(document).bind("mousemove."+s,function(n){if(!h&&u&&y()){var s=o.offset(),t=r(n)[0]-s.top+o[0].offsetTop,e=r(n)[1]-s.left+o[0].offsetLeft;t>0&&t<c.height()&&e>0&&e<c.width()?l.step&&i("off",null,"stepped"):("x"!==v.axis&&f.overflowed[0]&&(0>t?i("on",38):t>c.height()&&i("on",40)),"y"!==v.axis&&f.overflowed[1]&&(0>e?i("on",37):e>c.width()&&i("on",39)))}}).bind("mouseup."+s+" dragend."+s,function(){h||(u&&(u=0,i("off",null)),e=!1)})},oi=function(){function h(t,h){var a,v;if(o(s),!si(s,t.target)){if(a="auto"!==i.mouseWheel.deltaFactor?parseInt(i.mouseWheel.deltaFactor):p&&t.deltaFactor<100?100:t.deltaFactor||100,v=i.scrollInertia,"x"===i.axis||"x"===i.mouseWheel.axis)var y="x",l=[Math.round(a*r.scrollRatio.x),parseInt(i.mouseWheel.scrollAmount)],w="auto"!==i.mouseWheel.scrollAmount?l[1]:l[0]>=e.width()?.9*e.width():l[0],k=Math.abs(n("#mCSB_"+r.idx+"_container")[0].offsetLeft),b=f[1][0].offsetLeft,d=f[1].parent().width()-f[1].width(),c="y"===i.mouseWheel.axis?t.deltaY||h:t.deltaX;else var y="y",l=[Math.round(a*r.scrollRatio.y),parseInt(i.mouseWheel.scrollAmount)],w="auto"!==i.mouseWheel.scrollAmount?l[1]:l[0]>=e.height()?.9*e.height():l[0],k=Math.abs(n("#mCSB_"+r.idx+"_container")[0].offsetTop),b=f[0][0].offsetTop,d=f[0].parent().height()-f[0].height(),c=t.deltaY||h;("y"!==y||r.overflowed[0])&&("x"!==y||r.overflowed[1])&&((i.mouseWheel.invert||t.webkitDirectionInvertedFromDevice)&&(c=-c),i.mouseWheel.normalizeDelta&&(c=0>c?-1:1),(c>0&&0!==b||0>c&&b!==d||i.mouseWheel.preventDefault)&&(t.stopImmediatePropagation(),t.preventDefault()),t.deltaFactor<5&&!i.mouseWheel.normalizeDelta&&(w=t.deltaFactor,v=17),u(s,(k-c*w).toString(),{dir:y,dur:v}))}}if(n(this).data(t)){var s=n(this),r=s.data(t),i=r.opt,c=t+"_"+r.idx,e=n("#mCSB_"+r.idx),f=[n("#mCSB_"+r.idx+"_dragger_vertical"),n("#mCSB_"+r.idx+"_dragger_horizontal")],a=n("#mCSB_"+r.idx+"_container").find("iframe");a.length&&a.each(function(){n(this).bind("load",function(){l(this)&&n(this.contentDocument||this.contentWindow.document).bind("mousewheel."+c,function(n,t){h(n,t)})})});e.bind("mousewheel."+c,function(n,t){h(n,t)})}},rt={},l=function(t){var r=!1,i=!1,u=null,f;if(void 0===t?i="#empty":void 0!==n(t).attr("id")&&(i=n(t).attr("id")),i!==!1&&void 0!==rt[i])return rt[i];if(t){try{f=t.contentDocument||t.contentWindow.document;u=f.body.innerHTML}catch(e){}r=null!==u}else{try{f=top.document;u=f.body.innerHTML}catch(e){}r=null!==u}return i!==!1&&(rt[i]=r),r},lt=function(n){var t=this.find("iframe"),i;t.length&&(i=n?"auto":"none",t.css("pointer-events",i))},si=function(i,r){var u=r.nodeName.toLowerCase(),f=i.data(t).opt.mouseWheel.disableOver;return n.inArray(u,f)>-1&&!(n.inArray(u,["select","textarea"])>-1&&!n(r).is(":focus"))},hi=function(){var s,h=n(this),f=h.data(t),r=t+"_"+f.idx,c=n("#mCSB_"+f.idx+"_container"),l=c.parent(),a=n(".mCSB_"+f.idx+"_scrollbar ."+i[12]);a.bind("mousedown."+r+" touchstart."+r+" pointerdown."+r+" MSPointerDown."+r,function(t){e=!0;n(t.target).hasClass("mCSB_dragger")||(s=1)}).bind("touchend."+r+" pointerup."+r+" MSPointerUp."+r,function(){e=!1}).bind("click."+r,function(t){var r,e;if(s&&(s=0,n(t.target).hasClass(i[12])||n(t.target).hasClass("mCSB_draggerRail"))){if(o(h),r=n(this),e=r.find(".mCSB_dragger"),r.parent(".mCSB_scrollTools_horizontal").length>0){if(!f.overflowed[1])return;var v="x",a=t.pageX>e.offset().left?-1:1,y=Math.abs(c[0].offsetLeft)-a*.9*l.width()}else{if(!f.overflowed[0])return;var v="y",a=t.pageY>e.offset().top?-1:1,y=Math.abs(c[0].offsetTop)-a*.9*l.height()}u(h,y.toString(),{dir:v,scrollEasing:"mcsEaseInOut"})}})},ci=function(){var i=n(this),s=i.data(t),e=s.opt,c=t+"_"+s.idx,r=n("#mCSB_"+s.idx+"_container"),h=r.parent();r.bind("focusin."+c,function(){var t=n(document.activeElement),c=r.find(".mCustomScrollBox").length,s=0;t.is(e.advanced.autoScrollOnFocus)&&(o(i),clearTimeout(i[0]._focusTimeout),i[0]._focusTimer=c?(s+17)*c:0,i[0]._focusTimeout=setTimeout(function(){var n=[f(t)[0],f(t)[1]],o=[r[0].offsetTop,r[0].offsetLeft],c=[o[0]+n[0]>=0&&o[0]+n[0]<h.height()-t.outerHeight(!1),o[1]+n[1]>=0&&o[0]+n[1]<h.width()-t.outerWidth(!1)],l="yx"!==e.axis||c[0]||c[1]?"all":"none";"x"===e.axis||c[0]||u(i,n[0].toString(),{dir:"y",scrollEasing:"mcsEaseInOut",overwrite:l,dur:s});"y"===e.axis||c[1]||u(i,n[1].toString(),{dir:"x",scrollEasing:"mcsEaseInOut",overwrite:l,dur:s})},i[0]._focusTimer))})},li=function(){var u=n(this),i=u.data(t),f=t+"_"+i.idx,r=n("#mCSB_"+i.idx+"_container").parent();r.bind("scroll."+f,function(){0===r.scrollTop()&&0===r.scrollLeft()||n(".mCSB_"+i.idx+"_scrollbar").css("visibility","hidden")})},ai=function(){var f=n(this),r=f.data(t),o=r.opt,u=r.sequential,i=t+"_"+r.idx,s=".mCSB_"+r.idx+"_scrollbar",h=n(s+">a");h.bind("contextmenu."+i,function(n){n.preventDefault()}).bind("mousedown."+i+" touchstart."+i+" pointerdown."+i+" MSPointerDown."+i+" mouseup."+i+" touchend."+i+" pointerup."+i+" MSPointerUp."+i+" mouseout."+i+" pointerout."+i+" MSPointerOut."+i+" click."+i,function(t){function i(n,t){u.scrollAmount=o.scrollButtons.scrollAmount;ut(f,n,t)}if(t.preventDefault(),yt(t)){var s=n(this).attr("class");switch(u.type=o.scrollButtons.scrollType,t.type){case"mousedown":case"touchstart":case"pointerdown":case"MSPointerDown":if("stepped"===u.type)return;e=!0;r.tweenRunning=!1;i("on",s);break;case"mouseup":case"touchend":case"pointerup":case"MSPointerUp":case"mouseout":case"pointerout":case"MSPointerOut":if("stepped"===u.type)return;e=!1;u.dir&&i("off",s);break;case"click":if("stepped"!==u.type||r.tweenRunning)return;i("on",s)}}})},vi=function(){function a(t){function w(n,t){s.type=r.keyboard.scrollType;s.scrollAmount=r.keyboard.scrollAmount;"stepped"===s.type&&i.tweenRunning||ut(e,n,t)}var c,y,p,l,a;switch(t.type){case"blur":i.tweenRunning&&s.dir&&w("off",null);break;case"keydown":case"keyup":if(c=t.keyCode?t.keyCode:t.which,y="on","x"!==r.axis&&(38===c||40===c)||"y"!==r.axis&&(37===c||39===c)){if((38===c||40===c)&&!i.overflowed[0]||(37===c||39===c)&&!i.overflowed[1])return;"keyup"===t.type&&(y="off");n(document.activeElement).is(v)||(t.preventDefault(),t.stopImmediatePropagation(),w(y,c))}else 33===c||34===c?((i.overflowed[0]||i.overflowed[1])&&(t.preventDefault(),t.stopImmediatePropagation()),"keyup"===t.type)&&(o(e),p=34===c?-1:1,"x"===r.axis||"yx"===r.axis&&i.overflowed[1]&&!i.overflowed[0]?(l="x",a=Math.abs(f[0].offsetLeft)-p*.9*h.width()):(l="y",a=Math.abs(f[0].offsetTop)-p*.9*h.height()),u(e,a.toString(),{dir:l,scrollEasing:"mcsEaseInOut"})):35!==c&&36!==c||n(document.activeElement).is(v)||((i.overflowed[0]||i.overflowed[1])&&(t.preventDefault(),t.stopImmediatePropagation()),"keyup"!==t.type)||("x"===r.axis||"yx"===r.axis&&i.overflowed[1]&&!i.overflowed[0]?(l="x",a=35===c?Math.abs(h.width()-f.outerWidth(!1)):0):(l="y",a=35===c?Math.abs(h.height()-f.outerHeight(!1)):0),u(e,a.toString(),{dir:l,scrollEasing:"mcsEaseInOut"}))}}var e=n(this),i=e.data(t),r=i.opt,s=i.sequential,c=t+"_"+i.idx,w=n("#mCSB_"+i.idx),f=n("#mCSB_"+i.idx+"_container"),h=f.parent(),v="input,textarea,select,datalist,keygen,[contenteditable='true']",y=f.find("iframe"),p=["blur."+c+" keydown."+c+" keyup."+c];y.length&&y.each(function(){n(this).bind("load",function(){l(this)&&n(this.contentDocument||this.contentWindow.document).bind(p[0],function(n){a(n)})})});w.attr("tabindex","0").bind(p[0],function(n){a(n)})},ut=function(r,f,e,s,h){function y(n){l.snapAmount&&(c.scrollAmount=l.snapAmount instanceof Array?"x"===c.dir[0]?l.snapAmount[1]:l.snapAmount[0]:l.snapAmount);var i="stepped"!==c.type,f=h?h:n?i?k/1.5:d:1e3/60,e=n?i?7.5:40:2.5,t=[Math.abs(p[0].offsetTop),Math.abs(p[0].offsetLeft)],o=[v.scrollRatio.y>10?10:v.scrollRatio.y,v.scrollRatio.x>10?10:v.scrollRatio.x],w="x"===c.dir[0]?t[1]+c.dir[1]*o[1]*e:t[0]+c.dir[1]*o[0]*e,b="x"===c.dir[0]?t[1]+c.dir[1]*parseInt(c.scrollAmount):t[0]+c.dir[1]*parseInt(c.scrollAmount),a="auto"!==c.scrollAmount?b:w,g=s?s:n?i?"mcsLinearOut":"mcsEaseInOut":"mcsLinear",nt=!!n;return n&&17>f&&(a="x"===c.dir[0]?t[1]:t[0]),u(r,a.toString(),{dir:c.dir[0],scrollEasing:g,dur:f,onComplete:nt}),n?void(c.dir=!1):(clearTimeout(c.step),void(c.step=setTimeout(function(){y()},f)))}function b(){clearTimeout(c.step);a(c,"step");o(r)}var v=r.data(t),l=v.opt,c=v.sequential,p=n("#mCSB_"+v.idx+"_container"),w="stepped"===c.type,k=l.scrollInertia<26?26:l.scrollInertia,d=l.scrollInertia<1?17:l.scrollInertia;switch(f){case"on":if(c.dir=[e===i[16]||e===i[15]||39===e||37===e?"x":"y",e===i[13]||e===i[15]||38===e||37===e?-1:1],o(r),tt(e)&&"stepped"===c.type)return;y(w);break;case"off":b();(w||v.tweenRunning&&c.dir)&&y(!0)}},ft=function(i){var u=n(this).data(t).opt,r=[];return"function"==typeof i&&(i=i()),i instanceof Array?r=i.length>1?[i[0],i[1]]:"x"===u.axis?[null,i[0]]:[i[0],null]:(r[0]=i.y?i.y:i.x||"x"===u.axis?null:i,r[1]=i.x?i.x:i.y||"y"===u.axis?null:i),"function"==typeof r[0]&&(r[0]=r[0]()),"function"==typeof r[1]&&(r[1]=r[1]()),r},at=function(i,r){var h,e;if(null!=i&&"undefined"!=typeof i){var c=n(this),l=c.data(t),v=l.opt,u=n("#mCSB_"+l.idx+"_container"),o=u.parent(),y=typeof i;r||(r="x"===v.axis?"x":"y");var p="x"===r?u.outerWidth(!1)-o.width():u.outerHeight(!1)-o.height(),a="x"===r?u[0].offsetLeft:u[0].offsetTop,w="x"===r?"left":"top";switch(y){case"function":return i();case"object":return(e=i.jquery?i:n(i),!e.length)?void 0:"x"===r?f(e)[1]:f(e)[0];case"string":case"number":return tt(i)?Math.abs(i):-1!==i.indexOf("%")?Math.abs(p*parseInt(i)/100):-1!==i.indexOf("-=")?Math.abs(a-parseInt(i.split("-=")[1])):-1!==i.indexOf("+=")?(h=a+parseInt(i.split("+=")[1]),h>=0?0:Math.abs(h)):-1!==i.indexOf("px")&&tt(i.split("px")[0])?Math.abs(i.split("px")[0]):"top"===i||"left"===i?0:"bottom"===i?Math.abs(o.height()-u.outerHeight(!1)):"right"===i?Math.abs(o.width()-u.outerWidth(!1)):"first"===i||"last"===i?(e=u.find(":"+i),"x"===r?f(e)[1]:f(e)[0]):n(i).length?"x"===r?f(n(i))[1]:f(n(i))[0]:(u.css(w,i),void s.update.call(null,c[0]))}}},et=function(r){function c(){return clearTimeout(e[0].autoUpdate),0===o.parents("html").length?void(o=null):void(e[0].autoUpdate=setTimeout(function(){return f.advanced.updateOnSelectorChange&&(u.poll.change.n=v(),u.poll.change.n!==u.poll.change.o)?(u.poll.change.o=u.poll.change.n,void h(3)):f.advanced.updateOnContentResize&&(u.poll.size.n=o[0].scrollHeight+o[0].scrollWidth+e[0].offsetHeight+o[0].offsetHeight+o[0].offsetWidth,u.poll.size.n!==u.poll.size.o)?(u.poll.size.o=u.poll.size.n,void h(1)):!f.advanced.updateOnImageLoad||"auto"===f.advanced.updateOnImageLoad&&"y"===f.axis||(u.poll.img.n=e.find("img").length,u.poll.img.n===u.poll.img.o)?void((f.advanced.updateOnSelectorChange||f.advanced.updateOnContentResize||f.advanced.updateOnImageLoad)&&c()):(u.poll.img.o=u.poll.img.n,void e.find("img").each(function(){l(this)}))},f.advanced.autoUpdateTimeout))}function l(t){function u(n,t){return function(){return t.apply(n,arguments)}}function f(){this.onload=null;n(t).addClass(i[2]);h(2)}if(n(t).hasClass(i[2]))return void h();var r=new Image;r.onload=u(r,f);r.src=t.src}function v(){f.advanced.updateOnSelectorChange===!0&&(f.advanced.updateOnSelectorChange="*");var n=0,t=e.find(f.advanced.updateOnSelectorChange);return f.advanced.updateOnSelectorChange&&t.length>0&&t.each(function(){n+=this.offsetHeight+this.offsetWidth}),n}function h(n){clearTimeout(e[0].autoUpdate);s.update.call(null,o[0],n)}var o=n(this),u=o.data(t),f=u.opt,e=n("#mCSB_"+u.idx+"_container");return r?(clearTimeout(e[0].autoUpdate),void a(e[0],"autoUpdate")):void c()},yi=function(n,t,i){return Math.round(n/t)*t-i},o=function(i){var r=i.data(t),u=n("#mCSB_"+r.idx+"_container,#mCSB_"+r.idx+"_container_wrapper,#mCSB_"+r.idx+"_dragger_vertical,#mCSB_"+r.idx+"_dragger_horizontal");u.each(function(){pi.call(this)})},u=function(i,r,u){function h(n){return f&&e.callbacks[n]&&"function"==typeof e.callbacks[n]}function rt(){return[e.callbacks.alwaysTriggerOffsets||w>=l[0]+v,e.callbacks.alwaysTriggerOffsets||-y>=w]}function a(){var n=[o[0].offsetTop,o[0].offsetLeft],t=[c[0].offsetTop,c[0].offsetLeft],r=[o.outerHeight(!1),o.outerWidth(!1)],f=[p.height(),p.width()];i[0].mcs={content:o,top:n[0],left:n[1],draggerTop:t[0],draggerLeft:t[1],topPct:Math.round(100*Math.abs(n[0])/(Math.abs(r[0])-f[0])),leftPct:Math.round(100*Math.abs(n[1])/(Math.abs(r[1])-f[1])),direction:u.dir}}var f=i.data(t),e=f.opt,ut={trigger:"internal",dir:"y",scrollEasing:"mcsEaseOut",drag:!1,dur:e.scrollInertia,overwrite:"all",callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},u=n.extend(ut,u),k=[u.dur,u.drag?0:u.dur],p=n("#mCSB_"+f.idx),o=n("#mCSB_"+f.idx+"_container"),b=o.parent(),g=e.callbacks.onTotalScrollOffset?ft.call(i,e.callbacks.onTotalScrollOffset):[0,0],nt=e.callbacks.onTotalScrollBackOffset?ft.call(i,e.callbacks.onTotalScrollBackOffset):[0,0],tt;if(f.trigger=u.trigger,0===b.scrollTop()&&0===b.scrollLeft()||(n(".mCSB_"+f.idx+"_scrollbar").css("visibility","visible"),b.scrollTop(0).scrollLeft(0)),"_resetY"!==r||f.contentReset.y||(h("onOverflowYNone")&&e.callbacks.onOverflowYNone.call(i[0]),f.contentReset.y=1),"_resetX"!==r||f.contentReset.x||(h("onOverflowXNone")&&e.callbacks.onOverflowXNone.call(i[0]),f.contentReset.x=1),"_resetY"!==r&&"_resetX"!==r){(!f.contentReset.y&&i[0].mcs||!f.overflowed[0]||(h("onOverflowY")&&e.callbacks.onOverflowY.call(i[0]),f.contentReset.x=null),!f.contentReset.x&&i[0].mcs||!f.overflowed[1]||(h("onOverflowX")&&e.callbacks.onOverflowX.call(i[0]),f.contentReset.x=null),e.snapAmount)&&(tt=e.snapAmount instanceof Array?"x"===u.dir?e.snapAmount[1]:e.snapAmount[0]:e.snapAmount,r=yi(r,tt,e.snapOffset));switch(u.dir){case"x":var c=n("#mCSB_"+f.idx+"_dragger_horizontal"),it="left",w=o[0].offsetLeft,l=[p.width()-o.outerWidth(!1),c.parent().width()-c.width()],s=[r,0===r?0:r/f.scrollRatio.x],v=g[1],y=nt[1],et=v>0?v/f.scrollRatio.x:0,ot=y>0?y/f.scrollRatio.x:0;break;case"y":var c=n("#mCSB_"+f.idx+"_dragger_vertical"),it="top",w=o[0].offsetTop,l=[p.height()-o.outerHeight(!1),c.parent().height()-c.height()],s=[r,0===r?0:r/f.scrollRatio.y],v=g[0],y=nt[0],et=v>0?v/f.scrollRatio.y:0,ot=y>0?y/f.scrollRatio.y:0}s[1]<0||0===s[0]&&0===s[1]?s=[0,0]:s[1]>=l[1]?s=[l[0],l[1]]:s[0]=-s[0];i[0].mcs||(a(),h("onInit")&&e.callbacks.onInit.call(i[0]));clearTimeout(o[0].onCompleteTimeout);vt(c[0],it,Math.round(s[1]),k[1],u.scrollEasing);!f.tweenRunning&&(0===w&&s[0]>=0||w===l[0]&&s[0]<=l[0])||vt(o[0],it,Math.round(s[0]),k[0],u.scrollEasing,u.overwrite,{onStart:function(){u.callbacks&&u.onStart&&!f.tweenRunning&&(h("onScrollStart")&&(a(),e.callbacks.onScrollStart.call(i[0])),f.tweenRunning=!0,d(c),f.cbOffsets=rt())},onUpdate:function(){u.callbacks&&u.onUpdate&&h("whileScrolling")&&(a(),e.callbacks.whileScrolling.call(i[0]))},onComplete:function(){if(u.callbacks&&u.onComplete){"yx"===e.axis&&clearTimeout(o[0].onCompleteTimeout);var n=o[0].idleTimer||0;o[0].onCompleteTimeout=setTimeout(function(){h("onScroll")&&(a(),e.callbacks.onScroll.call(i[0]));h("onTotalScroll")&&s[1]>=l[1]-et&&f.cbOffsets[0]&&(a(),e.callbacks.onTotalScroll.call(i[0]));h("onTotalScrollBack")&&s[1]<=ot&&f.cbOffsets[1]&&(a(),e.callbacks.onTotalScrollBack.call(i[0]));f.tweenRunning=!1;o[0].idleTimer=0;d(c,"hide")},n)}}})}},vt=function(n,t,i,r,u,f,e){function a(){o.stop||(s||g.call(),s=w()-it,v(),s>=o.time&&(o.time=s>o.time?s+h-(s-o.time):s+h-1,o.time<s+1&&(o.time=s+1)),o.time<r?o.id=c(a):tt.call())}function v(){r>0?(o.currVal=d(o.time,l,p,r,u),y[t]=Math.round(o.currVal)+"px"):y[t]=i+"px";nt.call()}function b(){h=1e3/60;o.time=s+h;c=window.requestAnimationFrame?window.requestAnimationFrame:function(n){return v(),setTimeout(n,.01)};o.id=c(a)}function k(){null!=o.id&&(window.requestAnimationFrame?window.cancelAnimationFrame(o.id):clearTimeout(o.id),o.id=null)}function d(n,t,i,r,u){switch(u){case"linear":case"mcsLinear":return i*n/r+t;case"mcsLinearOut":return n/=r,n--,i*Math.sqrt(1-n*n)+t;case"easeInOutSmooth":return n/=r/2,1>n?i/2*n*n+t:(n--,-i/2*(n*(n-2)-1)+t);case"easeInOutStrong":return n/=r/2,1>n?i/2*Math.pow(2,10*(n-1))+t:(n--,i/2*(-Math.pow(2,-10*n)+2)+t);case"easeInOut":case"mcsEaseInOut":return n/=r/2,1>n?i/2*n*n*n+t:(n-=2,i/2*(n*n*n+2)+t);case"easeOutSmooth":return n/=r,n--,-i*(n*n*n*n-1)+t;case"easeOutStrong":return i*(-Math.pow(2,-10*n/r)+1)+t;case"easeOut":case"mcsEaseOut":default:var f=(n/=r)*n,e=f*n;return t+i*(.499999999999997*e*f+-2.5*f*f+5.5*e+-6.5*f+4*n)}}var p;n._mTween||(n._mTween={top:{},left:{}});var h,c,e=e||{},g=e.onStart||function(){},nt=e.onUpdate||function(){},tt=e.onComplete||function(){},it=w(),s=0,l=n.offsetTop,y=n.style,o=n._mTween[t];"left"===t&&(l=n.offsetLeft);p=i-l;o.stop=0;"none"!==f&&k();b()},w=function(){return window.performance&&window.performance.now?window.performance.now():window.performance&&window.performance.webkitNow?window.performance.webkitNow():Date.now?Date.now():(new Date).getTime()},pi=function(){var n=this,r,i,t;for(n._mTween||(n._mTween={top:{},left:{}}),r=["top","left"],i=0;i<r.length;i++)t=r[i],n._mTween[t].id&&(window.requestAnimationFrame?window.cancelAnimationFrame(n._mTween[t].id):clearTimeout(n._mTween[t].id),n._mTween[t].id=null,n._mTween[t].stop=1)},a=function(n,t){try{delete n[t]}catch(i){n[t]=null}},yt=function(n){return!(n.which&&1!==n.which)},nt=function(n){var t=n.originalEvent.pointerType;return!(t&&"touch"!==t&&2!==t)},tt=function(n){return!isNaN(parseFloat(n))&&isFinite(n)},f=function(n){var t=n.parents(".mCSB_container");return[n.offset().top-t.offset().top,n.offset().left-t.offset().left]},wi=function(){function t(){var t=["webkit","moz","ms","o"],n;if("hidden"in document)return"hidden";for(n=0;n<t.length;n++)if(t[n]+"Hidden"in document)return t[n]+"Hidden";return null}var n=t();return n?document[n]:!1};n.fn[c]=function(t){return s[t]?s[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void n.error("Method "+t+" does not exist"):s.init.apply(this,arguments)};n[c]=function(t){return s[t]?s[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void n.error("Method "+t+" does not exist"):s.init.apply(this,arguments)};n[c].defaults=ot;window[c]=!0;n(window).bind("load",function(){n(it)[c]();n.extend(n.expr[":"],{mcsInView:n.expr[":"].mcsInView||function(t){var e,r,i=n(t),u=i.parents(".mCSB_container");if(u.length)return e=u.parent(),r=[u[0].offsetTop,u[0].offsetLeft],r[0]+f(i)[0]>=0&&r[0]+f(i)[0]<e.height()-i.outerHeight(!1)&&r[1]+f(i)[1]>=0&&r[1]+f(i)[1]<e.width()-i.outerWidth(!1)},mcsInSight:n.expr[":"].mcsInSight||function(t,i,r){var e,u,o,s,h=n(t),c=h.parents(".mCSB_container"),l="exact"===r[3]?[[1,0],[1,0]]:[[.9,.1],[.6,.4]];if(c.length)return e=[h.outerHeight(!1),h.outerWidth(!1)],o=[c[0].offsetTop+f(h)[0],c[0].offsetLeft+f(h)[1]],u=[c.parent()[0].offsetHeight,c.parent()[0].offsetWidth],s=[e[0]<u[0]?l[0]:l[1],e[1]<u[1]?l[0]:l[1]],o[0]-u[0]*s[0][0]<0&&o[0]+e[0]-u[0]*s[0][1]>=0&&o[1]-u[1]*s[1][0]<0&&o[1]+e[1]-u[1]*s[1][1]>=0},mcsOverflow:n.expr[":"].mcsOverflow||function(i){var r=n(i).data(t);if(r)return r.overflowed[0]||r.overflowed[1]}})})})});
/*!
 * Knockout JavaScript library v3.4.0
 * (c) Steven Sanderson - http://knockoutjs.com/
 * License: MIT (http://www.opensource.org/licenses/mit-license.php)
 */
(function(){(function(n){var r=this||eval("this"),t=r.document,f=r.navigator,i=r.jQuery,u=r.JSON;(function(n){"function"==typeof define&&define.amd?define(["exports","require"],n):"object"==typeof exports&&"object"==typeof module?n(module.exports||exports):n(r.ko={})})(function(e,o){function b(n,t){return null===n||typeof n in nt?n===t:!1}function tt(t,i){var r;return function(){r||(r=s.a.setTimeout(function(){r=n;t()},i))}}function it(n,t){var i;return function(){clearTimeout(i);i=s.a.setTimeout(n,t)}}function rt(n,t){t&&t!==p?"beforeChange"===t?this.Kb(n):this.Ha(n,t):this.Lb(n)}function ut(n,t){null!==t&&t.k&&t.k()}function ft(n,t){var i=this.Hc,r=i[h];r.R||(this.lb&&this.Ma[t]?(i.Pb(t,n,this.Ma[t]),this.Ma[t]=null,--this.lb):r.r[t]||i.Pb(t,n,r.s?{ia:n}:i.uc(n)))}function k(n,t,i,r){s.d[n]={init:function(n,u,f,e,o){var c,h;return s.m(function(){var l=s.a.c(u()),f=!i!=!l,e=!h;(e||t||f!==c)&&(e&&s.va.Aa()&&(h=s.a.ua(s.f.childNodes(n),!0)),f?(e||s.f.da(n,s.a.ua(h)),s.eb(r?r(o,l):o,n)):s.f.xa(n),c=f)},null,{i:n}),{controlsDescendantBindings:!0}}};s.h.ta[n]=!1;s.f.Z[n]=!0}var s="undefined"!=typeof e?e:{},nt,p,l,v,a,y,h,d,g,w;s.b=function(n,t){for(var i=n.split("."),r=s,u=0;u<i.length-1;u++)r=r[i[u]];r[i[i.length-1]]=t};s.G=function(n,t,i){n[t]=i};s.version="3.4.0";s.b("version",s.version);s.options={deferUpdates:!1,useOnlyNativeEvents:!1};s.a=function(){function o(n,t){for(var i in n)n.hasOwnProperty(i)&&t(i,n[i])}function l(n,t){if(t)for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n}function a(n,t){return n.__proto__=t,n}function v(n,t,i,r){var u=n[t].match(c)||[];s.a.q(i.match(c),function(n){s.a.pa(u,n,r)});n[t]=u.join(" ")}var y={__proto__:[]}instanceof Array,w="function"==typeof Symbol,h={},p={};h[f&&/Firefox\/2/i.test(f.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"];h.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" ");o(h,function(n,t){if(t.length)for(var i=0,r=t.length;i<r;i++)p[t[i]]=n});var b={propertychange:!0},e=t&&function(){for(var i=3,r=t.createElement("div"),u=r.getElementsByTagName("i");r.innerHTML="<!--[if gt IE "+ ++i+"]><i><\/i><![endif]-->",u[0];);return 4<i?i:n}(),c=/\S+/g;return{cc:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],q:function(n,t){for(var i=0,r=n.length;i<r;i++)t(n[i],i)},o:function(n,t){if("function"==typeof Array.prototype.indexOf)return Array.prototype.indexOf.call(n,t);for(var i=0,r=n.length;i<r;i++)if(n[i]===t)return i;return-1},Sb:function(n,t,i){for(var r=0,u=n.length;r<u;r++)if(t.call(i,n[r],r))return n[r];return null},La:function(n,t){var i=s.a.o(n,t);0<i?n.splice(i,1):0===i&&n.shift()},Tb:function(n){n=n||[];for(var i=[],t=0,r=n.length;t<r;t++)0>s.a.o(i,n[t])&&i.push(n[t]);return i},fb:function(n,t){n=n||[];for(var r=[],i=0,u=n.length;i<u;i++)r.push(t(n[i],i));return r},Ka:function(n,t){n=n||[];for(var r=[],i=0,u=n.length;i<u;i++)t(n[i],i)&&r.push(n[i]);return r},ra:function(n,t){if(t instanceof Array)n.push.apply(n,t);else for(var i=0,r=t.length;i<r;i++)n.push(t[i]);return n},pa:function(n,t,i){var r=s.a.o(s.a.zb(n),t);0>r?i&&n.push(t):i||n.splice(r,1)},ka:y,extend:l,Xa:a,Ya:y?a:l,D:o,Ca:function(n,t){if(!n)return n;var r={};for(var i in n)n.hasOwnProperty(i)&&(r[i]=t(n[i],i,n));return r},ob:function(n){for(;n.firstChild;)s.removeNode(n.firstChild)},jc:function(n){n=s.a.V(n);for(var r=(n[0]&&n[0].ownerDocument||t).createElement("div"),i=0,u=n.length;i<u;i++)r.appendChild(s.$(n[i]));return r},ua:function(n,t){for(var r,i=0,f=n.length,u=[];i<f;i++)r=n[i].cloneNode(!0),u.push(t?s.$(r):r);return u},da:function(n,t){if(s.a.ob(n),t)for(var i=0,r=t.length;i<r;i++)n.appendChild(t[i])},qc:function(n,t){var r=n.nodeType?[n]:n;if(0<r.length){for(var f=r[0],e=f.parentNode,i=0,u=t.length;i<u;i++)e.insertBefore(t[i],f);for(i=0,u=r.length;i<u;i++)s.removeNode(r[i])}},za:function(n,t){if(n.length){for(t=8===t.nodeType&&t.parentNode||t;n.length&&n[0].parentNode!==t;)n.splice(0,1);for(;1<n.length&&n[n.length-1].parentNode!==t;)n.length--;if(1<n.length){var i=n[0],r=n[n.length-1];for(n.length=0;i!==r;)n.push(i),i=i.nextSibling;n.push(r)}}return n},sc:function(n,t){7>e?n.setAttribute("selected",t):n.selected=t},$a:function(t){return null===t||t===n?"":t.trim?t.trim():t.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},nd:function(n,t){return n=n||"",t.length>n.length?!1:n.substring(0,t.length)===t},Mc:function(n,t){if(n===t)return!0;if(11===n.nodeType)return!1;if(t.contains)return t.contains(3===n.nodeType?n.parentNode:n);if(t.compareDocumentPosition)return 16==(t.compareDocumentPosition(n)&16);for(;n&&n!=t;)n=n.parentNode;return!!n},nb:function(n){return s.a.Mc(n,n.ownerDocument.documentElement)},Qb:function(n){return!!s.a.Sb(n,s.a.nb)},A:function(n){return n&&n.tagName&&n.tagName.toLowerCase()},Wb:function(n){return s.onError?function(){try{return n.apply(this,arguments)}catch(t){throw s.onError&&s.onError(t),t;}}:n},setTimeout:function(n,t){return setTimeout(s.a.Wb(n),t)},$b:function(n){setTimeout(function(){s.onError&&s.onError(n);throw n;},0)},p:function(n,t,r){var u=s.a.Wb(r),f,o;if(r=e&&b[t],s.options.useOnlyNativeEvents||r||!i)if(r||"function"!=typeof n.addEventListener)if("undefined"!=typeof n.attachEvent)f=function(t){u.call(n,t)},o="on"+t,n.attachEvent(o,f),s.a.F.oa(n,function(){n.detachEvent(o,f)});else throw Error("Browser doesn't support addEventListener or attachEvent");else n.addEventListener(t,u,!1);else i(n).bind(t,u)},Da:function(n,u){if(!n||!n.nodeType)throw Error("element must be a DOM node when calling triggerEvent");var f;if("input"===s.a.A(n)&&n.type&&"click"==u.toLowerCase()?(f=n.type,f="checkbox"==f||"radio"==f):f=!1,s.options.useOnlyNativeEvents||!i||f)if("function"==typeof t.createEvent)if("function"==typeof n.dispatchEvent)f=t.createEvent(p[u]||"HTMLEvents"),f.initEvent(u,!0,!0,r,0,0,0,0,0,!1,!1,!1,!1,0,n),n.dispatchEvent(f);else throw Error("The supplied element doesn't support dispatchEvent");else if(f&&n.click)n.click();else if("undefined"!=typeof n.fireEvent)n.fireEvent("on"+u);else throw Error("Browser doesn't support triggering events");else i(n).trigger(u)},c:function(n){return s.H(n)?n():n},zb:function(n){return s.H(n)?n.t():n},bb:function(n,t,i){var r;t&&("object"==typeof n.classList?(r=n.classList[i?"add":"remove"],s.a.q(t.match(c),function(t){r.call(n.classList,t)})):"string"==typeof n.className.baseVal?v(n.className,"baseVal",t,i):v(n,"className",t,i))},Za:function(t,i){var r=s.a.c(i),u;(null===r||r===n)&&(r="");u=s.f.firstChild(t);!u||3!=u.nodeType||s.f.nextSibling(u)?s.f.da(t,[t.ownerDocument.createTextNode(r)]):u.data=r;s.a.Rc(t)},rc:function(n,i){if(n.name=i,7>=e)try{n.mergeAttributes(t.createElement("<input name='"+n.name+"'/>"),!1)}catch(r){}},Rc:function(n){9<=e&&(n=1==n.nodeType?n:n.parentNode,n.style&&(n.style.zoom=n.style.zoom))},Nc:function(n){if(e){var t=n.style.width;n.style.width=0;n.style.width=t}},hd:function(n,t){n=s.a.c(n);t=s.a.c(t);for(var r=[],i=n;i<=t;i++)r.push(i);return r},V:function(n){for(var i=[],t=0,r=n.length;t<r;t++)i.push(n[t]);return i},Yb:function(n){return w?Symbol(n):n},rd:6===e,sd:7===e,C:e,ec:function(n,t){for(var r=s.a.V(n.getElementsByTagName("input")).concat(s.a.V(n.getElementsByTagName("textarea"))),f="string"==typeof t?function(n){return n.name===t}:function(n){return t.test(n.name)},u=[],i=r.length-1;0<=i;i--)f(r[i])&&u.push(r[i]);return u},ed:function(n){return"string"==typeof n&&(n=s.a.$a(n))?u&&u.parse?u.parse(n):new Function("return "+n)():null},Eb:function(n,t,i){if(!u||!u.stringify)throw Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return u.stringify(s.a.c(n),t,i)},fd:function(n,i,r){var v,e,h,f,u,c;r=r||{};var l=r.params||{},a=r.includeFields||this.cc,v=n;if("object"==typeof n&&"form"===s.a.A(n))for(v=n.action,e=a.length-1;0<=e;e--)for(h=s.a.ec(n,a[e]),f=h.length-1;0<=f;f--)l[h[f].name]=h[f].value;i=s.a.c(i);u=t.createElement("form");u.style.display="none";u.action=v;u.method="post";for(c in i)n=t.createElement("input"),n.type="hidden",n.name=c,n.value=s.a.Eb(s.a.c(i[c])),u.appendChild(n);o(l,function(n,i){var r=t.createElement("input");r.type="hidden";r.name=n;r.value=i;u.appendChild(r)});t.body.appendChild(u);r.submitter?r.submitter(u):u.submit();setTimeout(function(){u.parentNode.removeChild(u)},0)}}}();s.b("utils",s.a);s.b("utils.arrayForEach",s.a.q);s.b("utils.arrayFirst",s.a.Sb);s.b("utils.arrayFilter",s.a.Ka);s.b("utils.arrayGetDistinctValues",s.a.Tb);s.b("utils.arrayIndexOf",s.a.o);s.b("utils.arrayMap",s.a.fb);s.b("utils.arrayPushAll",s.a.ra);s.b("utils.arrayRemoveItem",s.a.La);s.b("utils.extend",s.a.extend);s.b("utils.fieldsIncludedWithJsonPost",s.a.cc);s.b("utils.getFormFields",s.a.ec);s.b("utils.peekObservable",s.a.zb);s.b("utils.postJson",s.a.fd);s.b("utils.parseJson",s.a.ed);s.b("utils.registerEventHandler",s.a.p);s.b("utils.stringifyJson",s.a.Eb);s.b("utils.range",s.a.hd);s.b("utils.toggleDomNodeCssClass",s.a.bb);s.b("utils.triggerEvent",s.a.Da);s.b("utils.unwrapObservable",s.a.c);s.b("utils.objectForEach",s.a.D);s.b("utils.addOrRemoveItem",s.a.pa);s.b("utils.setTextContent",s.a.Za);s.b("unwrap",s.a.c);Function.prototype.bind||(Function.prototype.bind=function(n){var t=this,i;return 1===arguments.length?function(){return t.apply(n,arguments)}:(i=Array.prototype.slice.call(arguments,1),function(){var r=i.slice(0);return r.push.apply(r,arguments),t.apply(n,r)})});s.a.e=new function(){function r(r,f){var e=r[t];if(!e||"null"===e||!i[e]){if(!f)return n;e=r[t]="ko"+u++;i[e]={}}return i[e]}var u=0,t="__ko__"+(new Date).getTime(),i={};return{get:function(t,i){var u=r(t,!1);return u===n?n:u[i]},set:function(t,i,u){(u!==n||r(t,!1)!==n)&&(r(t,!0)[i]=u)},clear:function(n){var r=n[t];return r?(delete i[r],n[t]=null,!0):!1},I:function(){return u+++t}}};s.b("utils.domData",s.a.e);s.b("utils.domData.clear",s.a.e.clear);s.a.F=new function(){function t(t,i){var r=s.a.e.get(t,u);return r===n&&i&&(r=[],s.a.e.set(t,u,r)),r}function r(n){var i=t(n,!1),u;if(i)for(i=i.slice(0),u=0;u<i.length;u++)i[u](n);if(s.a.e.clear(n),s.a.F.cleanExternalData(n),f[n.nodeType])for(i=n.firstChild;n=i;)i=n.nextSibling,8===n.nodeType&&r(n)}var u=s.a.e.I(),e={1:!0,8:!0,9:!0},f={1:!0,9:!0};return{oa:function(n,i){if("function"!=typeof i)throw Error("Callback must be a function");t(n,!0).push(i)},pc:function(i,r){var f=t(i,!1);f&&(s.a.La(f,r),0==f.length&&s.a.e.set(i,u,n))},$:function(n){var t,i,u;if(e[n.nodeType]&&(r(n),f[n.nodeType]))for(t=[],s.a.ra(t,n.getElementsByTagName("*")),i=0,u=t.length;i<u;i++)r(t[i]);return n},removeNode:function(n){s.$(n);n.parentNode&&n.parentNode.removeChild(n)},cleanExternalData:function(n){i&&"function"==typeof i.cleanData&&i.cleanData([n])}}};s.$=s.a.F.$;s.removeNode=s.a.F.removeNode;s.b("cleanNode",s.$);s.b("removeNode",s.removeNode);s.b("utils.domNodeDisposal",s.a.F);s.b("utils.domNodeDisposal.addDisposeCallback",s.a.F.oa);s.b("utils.domNodeDisposal.removeDisposeCallback",s.a.F.pc),function(){var h=[0,"",""],u=[1,"<table>","<\/table>"],f=[3,"<table><tbody><tr>","<\/tr><\/tbody><\/table>"],e=[1,"<select multiple='multiple'>","<\/select>"],c={thead:u,tbody:u,tfoot:u,tr:[2,"<table><tbody>","<\/tbody><\/table>"],td:f,th:f,option:e,optgroup:e},o=8>=s.a.C;s.a.ma=function(n,u){var f,e;if(i){if(i.parseHTML)f=i.parseHTML(n,u)||[];else if((f=i.clean([n],u))&&f[0]){for(e=f[0];e.parentNode&&11!==e.parentNode.nodeType;)e=e.parentNode;e.parentNode&&e.parentNode.removeChild(e)}}else{(f=u)||(f=t);var e=f.parentWindow||f.defaultView||r,v=s.a.$a(n).toLowerCase(),l=f.createElement("div"),a;for(a=(v=v.match(/^<([a-z]+)[ >]/))&&c[v[1]]||h,v=a[0],a="ignored<div>"+a[1]+n+a[2]+"<\/div>","function"==typeof e.innerShiv?l.appendChild(e.innerShiv(a)):(o&&f.appendChild(l),l.innerHTML=a,o&&l.parentNode.removeChild(l));v--;)l=l.lastChild;f=s.a.V(l.lastChild.childNodes)}return f};s.a.Cb=function(t,r){if(s.a.ob(t),r=s.a.c(r),null!==r&&r!==n)if("string"!=typeof r&&(r=r.toString()),i)i(t).html(r);else for(var f=s.a.ma(r,t.ownerDocument),u=0;u<f.length;u++)t.appendChild(f[u])}}();s.b("utils.parseHtmlFragment",s.a.ma);s.b("utils.setHtml",s.a.Cb);s.M=function(){function i(n,t){var r;if(n)if(8==n.nodeType)r=s.M.lc(n.nodeValue),null!=r&&t.push({Lc:n,cd:r});else if(1==n.nodeType)for(var r=0,u=n.childNodes,f=u.length;r<f;r++)i(u[r],t)}var t={};return{wb:function(n){if("function"!=typeof n)throw Error("You can only pass a function to ko.memoization.memoize()");var i=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);return t[i]=n,"<!--[ko_memo:"+i+"]-->"},xc:function(i,r){var u=t[i];if(u===n)throw Error("Couldn't find any memo with ID "+i+". Perhaps it's already been unmemoized.");try{return u.apply(null,r||[]),!0}finally{delete t[i]}},yc:function(n,t){var f=[],u,o,r,e;for(i(n,f),u=0,o=f.length;u<o;u++)r=f[u].Lc,e=[r],t&&s.a.ra(e,t),s.M.xc(f[u].cd,e),r.nodeValue="",r.parentNode&&r.parentNode.removeChild(r)},lc:function(n){return(n=n.match(/^\[ko_memo\:(.*?)\]$/))?n[1]:null}}}();s.b("memoization",s.M);s.b("memoization.memoize",s.M.wb);s.b("memoization.unmemoize",s.M.xc);s.b("memoization.parseMemoText",s.M.lc);s.b("memoization.unmemoizeDomNodeAndDescendants",s.M.yc);s.Y=function(){function f(){if(n)for(var t=n,r=0,f;i<n;)if(f=u[i++]){if(i>t){if(5e3<=++r){i=n;s.a.$b(Error("'Too much recursion' after processing "+r+" task groups."));break}t=n}try{f()}catch(e){s.a.$b(e)}}}function e(){f();i=n=u.length=0}var u=[],n=0,o=1,i=0;return{scheduler:r.MutationObserver?function(n){var i=t.createElement("div");return new MutationObserver(n).observe(i,{attributes:!0}),function(){i.classList.toggle("foo")}}(e):t&&"onreadystatechange"in t.createElement("script")?function(n){var i=t.createElement("script");i.onreadystatechange=function(){i.onreadystatechange=null;t.documentElement.removeChild(i);i=null;n()};t.documentElement.appendChild(i)}:function(n){setTimeout(n,0)},Wa:function(t){return n||s.Y.scheduler(e),u[n++]=t,o++},cancel:function(t){t-=o-n;t>=i&&t<n&&(u[t]=null)},resetForTesting:function(){var t=n-i;return i=n=u.length=0,t},md:f}}();s.b("tasks",s.Y);s.b("tasks.schedule",s.Y.Wa);s.b("tasks.runEarly",s.Y.md);s.ya={throttle:function(n,t){n.throttleEvaluation=t;var i=null;return s.B({read:n,write:function(r){clearTimeout(i);i=s.a.setTimeout(function(){n(r)},t)}})},rateLimit:function(n,t){var i,r,u;"number"==typeof t?i=t:(i=t.timeout,r=t.method);n.cb=!1;u="notifyWhenChangesStop"==r?it:tt;n.Ta(function(n){return u(n,i)})},deferred:function(t,i){if(!0!==i)throw Error("The 'deferred' extender only accepts the value 'true', because it is not supported to turn deferral off once enabled.");t.cb||(t.cb=!0,t.Ta(function(i){var r;return function(){s.Y.cancel(r);r=s.Y.Wa(i);t.notifySubscribers(n,"dirty")}}))},notify:function(n,t){n.equalityComparer="always"==t?null:b}};nt={undefined:1,boolean:1,number:1,string:1};s.b("extenders",s.ya);s.vc=function(n,t,i){this.ia=n;this.gb=t;this.Kc=i;this.R=!1;s.G(this,"dispose",this.k)};s.vc.prototype.k=function(){this.R=!0;this.Kc()};s.J=function(){s.a.Ya(this,l);l.rb(this)};p="change";l={rb:function(n){n.K={};n.Nb=1},X:function(n,t,i){var r=this,u;return i=i||p,u=new s.vc(r,t?n.bind(t):n,function(){s.a.La(r.K[i],u);r.Ia&&r.Ia(i)}),r.sa&&r.sa(i),r.K[i]||(r.K[i]=[]),r.K[i].push(u),u},notifySubscribers:function(n,t){if(t=t||p,t===p&&this.zc(),this.Pa(t))try{s.l.Ub();for(var u=this.K[t].slice(0),r=0,i;i=u[r];++r)i.R||i.gb(n)}finally{s.l.end()}},Na:function(){return this.Nb},Uc:function(n){return this.Na()!==n},zc:function(){++this.Nb},Ta:function(n){var t=this,e=s.H(t),r,u,i,f;t.Ha||(t.Ha=t.notifySubscribers,t.notifySubscribers=rt);f=n(function(){t.Mb=!1;e&&i===t&&(i=t());r=!1;t.tb(u,i)&&t.Ha(u=i)});t.Lb=function(n){t.Mb=r=!0;i=n;f()};t.Kb=function(n){r||(u=n,t.Ha(n,"beforeChange"))}},Pa:function(n){return this.K[n]&&this.K[n].length},Sc:function(n){if(n)return this.K[n]&&this.K[n].length||0;var t=0;return s.a.D(this.K,function(n,i){"dirty"!==n&&(t+=i.length)}),t},tb:function(n,t){return!this.equalityComparer||!this.equalityComparer(n,t)},extend:function(n){var t=this;return n&&s.a.D(n,function(n,i){var r=s.ya[n];"function"==typeof r&&(t=r(t,i)||t)}),t}};s.G(l,"subscribe",l.X);s.G(l,"extend",l.extend);s.G(l,"getSubscriptionsCount",l.Sc);s.a.ka&&s.a.Xa(l,Function.prototype);s.J.fn=l;s.hc=function(n){return null!=n&&"function"==typeof n.X&&"function"==typeof n.notifySubscribers};s.b("subscribable",s.J);s.b("isSubscribable",s.hc);s.va=s.l=function(){function t(t){r.push(n);n=t}function i(){n=r.pop()}var r=[],n,u=0;return{Ub:t,end:i,oc:function(t){if(n){if(!s.hc(t))throw Error("Only subscribable things can act as dependencies");n.gb.call(n.Gc,t,t.Cc||(t.Cc=++u))}},w:function(n,r,u){try{return t(),n.apply(r,u||[])}finally{i()}},Aa:function(){if(n)return n.m.Aa()},Sa:function(){if(n)return n.Sa}}}();s.b("computedContext",s.va);s.b("computedContext.getDependenciesCount",s.va.Aa);s.b("computedContext.isInitial",s.va.Sa);s.b("ignoreDependencies",s.qd=s.l.w);v=s.a.Yb("_latestValue");s.N=function(n){function t(){return 0<arguments.length?(t.tb(t[v],arguments[0])&&(t.ga(),t[v]=arguments[0],t.fa()),this):(s.l.oc(t),t[v])}return t[v]=n,s.a.ka||s.a.extend(t,s.J.fn),s.J.fn.rb(t),s.a.Ya(t,a),s.options.deferUpdates&&s.ya.deferred(t,!0),t};a={equalityComparer:b,t:function(){return this[v]},fa:function(){this.notifySubscribers(this[v])},ga:function(){this.notifySubscribers(this[v],"beforeChange")}};s.a.ka&&s.a.Xa(a,s.J.fn);y=s.N.gd="__ko_proto__";a[y]=s.N;s.Oa=function(t,i){return null===t||t===n||t[y]===n?!1:t[y]===i?!0:s.Oa(t[y],i)};s.H=function(n){return s.Oa(n,s.N)};s.Ba=function(n){return"function"==typeof n&&n[y]===s.N||"function"==typeof n&&n[y]===s.B&&n.Vc?!0:!1};s.b("observable",s.N);s.b("isObservable",s.H);s.b("isWriteableObservable",s.Ba);s.b("isWritableObservable",s.Ba);s.b("observable.fn",a);s.G(a,"peek",a.t);s.G(a,"valueHasMutated",a.fa);s.G(a,"valueWillMutate",a.ga);s.la=function(n){if(n=n||[],"object"!=typeof n||!("length"in n))throw Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");return n=s.N(n),s.a.Ya(n,s.la.fn),n.extend({trackArrayChanges:!0})};s.la.fn={remove:function(n){for(var u,r=this.t(),i=[],f="function"!=typeof n||s.H(n)?function(t){return t===n}:n,t=0;t<r.length;t++)u=r[t],f(u)&&(0===i.length&&this.ga(),i.push(u),r.splice(t,1),t--);return i.length&&this.fa(),i},removeAll:function(t){if(t===n){var i=this.t(),r=i.slice(0);return this.ga(),i.splice(0,i.length),this.fa(),r}return t?this.remove(function(n){return 0<=s.a.o(t,n)}):[]},destroy:function(n){var i=this.t(),r="function"!=typeof n||s.H(n)?function(t){return t===n}:n,t;for(this.ga(),t=i.length-1;0<=t;t--)r(i[t])&&(i[t]._destroy=!0);this.fa()},destroyAll:function(t){return t===n?this.destroy(function(){return!0}):t?this.destroy(function(n){return 0<=s.a.o(t,n)}):[]},indexOf:function(n){var t=this();return s.a.o(t,n)},replace:function(n,t){var i=this.indexOf(n);0<=i&&(this.ga(),this.t()[i]=t,this.fa())}};s.a.ka&&s.a.Xa(s.la.fn,s.N.fn);s.a.q("pop push reverse shift sort splice unshift".split(" "),function(n){s.la.fn[n]=function(){var t=this.t(),i;return this.ga(),this.Vb(t,n,arguments),i=t[n].apply(t,arguments),this.fa(),i===t?this:i}});s.a.q(["slice"],function(n){s.la.fn[n]=function(){var t=this();return t[n].apply(t,arguments)}});s.b("observableArray",s.la);s.ya.trackArrayChanges=function(n,t){function h(){var e,t;r||(r=!0,e=n.notifySubscribers,n.notifySubscribers=function(n,t){return t&&t!==p||++u,e.apply(this,arguments)},t=[].concat(n.t()||[]),i=null,f=n.X(function(r){if(r=[].concat(r||[]),n.Pa("arrayChange")){var f;(!i||1<u)&&(i=s.a.ib(t,r,n.hb));f=i}t=r;i=null;u=0;f&&f.length&&n.notifySubscribers(f,"arrayChange")}))}if(n.hb={},t&&"object"==typeof t&&s.a.extend(n.hb,t),n.hb.sparse=!0,!n.Vb){var r=!1,i=null,f,u=0,e=n.sa,o=n.Ia;n.sa=function(t){e&&e.call(n,t);"arrayChange"===t&&h()};n.Ia=function(t){o&&o.call(n,t);"arrayChange"!==t||n.Pa("arrayChange")||(f.k(),r=!1)};n.Vb=function(n,t,f){function c(n,t,i){return l[l.length]={status:n,value:t,index:i}}if(r&&!u){var l=[],e=n.length,h=f.length,o=0;switch(t){case"push":o=e;case"unshift":for(t=0;t<h;t++)c("added",f[t],o+t);break;case"pop":o=e-1;case"shift":e&&c("deleted",n[o],o);break;case"splice":t=Math.min(Math.max(0,0>f[0]?e+f[0]:f[0]),e);for(var e=1===h?e:Math.min(t+(f[1]||0),e),h=t+h-2,o=Math.max(e,h),a=[],v=[],y=2;t<o;++t,++y)t<e&&v.push(c("deleted",n[t],t)),t<h&&a.push(c("added",f[y],t));s.a.dc(v,a);break;default:return}i=l}}}};h=s.a.Yb("_state");s.m=s.B=function(t,i,r){function u(){if(0<arguments.length){if("function"==typeof e)e.apply(f.pb,arguments);else throw Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return this}return s.l.oc(u),(f.S||f.s&&u.Qa())&&u.aa(),f.T}if("object"==typeof t?r=t:(r=r||{},t&&(r.read=t)),"function"!=typeof r.read)throw Error("Pass a function that returns the value of the ko.computed");var e=r.write,f={T:n,S:!0,Ra:!1,Fb:!1,R:!1,Va:!1,s:!1,jd:r.read,pb:i||r.owner,i:r.disposeWhenNodeIsRemoved||r.i||null,wa:r.disposeWhen||r.wa,mb:null,r:{},L:0,bc:null};return u[h]=f,u.Vc="function"==typeof e,s.a.ka||s.a.extend(u,s.J.fn),s.J.fn.rb(u),s.a.Ya(u,c),r.pure?(f.Va=!0,f.s=!0,s.a.extend(u,et)):r.deferEvaluation&&s.a.extend(u,ot),s.options.deferUpdates&&s.ya.deferred(u,!0),f.i&&(f.Fb=!0,f.i.nodeType||(f.i=null)),f.s||r.deferEvaluation||u.aa(),f.i&&u.ba()&&s.a.F.oa(f.i,f.mb=function(){u.k()}),u};var c={equalityComparer:b,Aa:function(){return this[h].L},Pb:function(n,t,i){if(this[h].Va&&t===this)throw Error("A 'pure' computed must not be called recursively");this[h].r[n]=i;i.Ga=this[h].L++;i.na=t.Na()},Qa:function(){var n,t,i=this[h].r;for(n in i)if(i.hasOwnProperty(n)&&(t=i[n],t.ia.Uc(t.na)))return!0},bd:function(){this.Fa&&!this[h].Ra&&this.Fa()},ba:function(){return this[h].S||0<this[h].L},ld:function(){this.Mb||this.ac()},uc:function(n){if(n.cb&&!this[h].i){var t=n.X(this.bd,this,"dirty"),i=n.X(this.ld,this);return{ia:n,k:function(){t.k();i.k()}}}return n.X(this.ac,this)},ac:function(){var n=this,t=n.throttleEvaluation;t&&0<=t?(clearTimeout(this[h].bc),this[h].bc=s.a.setTimeout(function(){n.aa(!0)},t)):n.Fa?n.Fa():n.aa(!0)},aa:function(n){var t=this[h],i=t.wa;if(!t.Ra&&!t.R){if(t.i&&!s.a.nb(t.i)||i&&i()){if(!t.Fb){this.k();return}}else t.Fb=!1;t.Ra=!0;try{this.Qc(n)}finally{t.Ra=!1}t.L||this.k()}},Qc:function(t){var i=this[h],u=i.Va?n:!i.L,r={Hc:this,Ma:i.r,lb:i.L};s.l.Ub({Gc:r,gb:ft,m:this,Sa:u});i.r={};i.L=0;r=this.Pc(i,r);this.tb(i.T,r)&&(i.s||this.notifySubscribers(i.T,"beforeChange"),i.T=r,i.s?this.zc():t&&this.notifySubscribers(i.T));u&&this.notifySubscribers(i.T,"awake")},Pc:function(n,t){try{var i=n.jd;return n.pb?i.call(n.pb):i()}finally{s.l.end();t.lb&&!n.s&&s.a.D(t.Ma,ut);n.S=!1}},t:function(){var n=this[h];return(n.S&&!n.L||n.s&&this.Qa())&&this.aa(),n.T},Ta:function(n){s.J.fn.Ta.call(this,n);this.Fa=function(){this.Kb(this[h].T);this[h].S=!0;this.Lb(this)}},k:function(){var n=this[h];!n.s&&n.r&&s.a.D(n.r,function(n,t){t.k&&t.k()});n.i&&n.mb&&s.a.F.pc(n.i,n.mb);n.r=null;n.L=0;n.R=!0;n.S=!1;n.s=!1;n.i=null}},et={sa:function(n){var i=this,t=i[h],r;!t.R&&t.s&&"change"==n&&(t.s=!1,t.S||i.Qa()?(t.r=null,t.L=0,t.S=!0,i.aa()):(r=[],s.a.D(t.r,function(n,t){r[t.Ga]=n}),s.a.q(r,function(n,r){var f=t.r[n],u=i.uc(f.ia);u.Ga=r;u.na=f.na;t.r[n]=u})),t.R||i.notifySubscribers(t.T,"awake"))},Ia:function(t){var i=this[h];i.R||"change"!=t||this.Pa("change")||(s.a.D(i.r,function(n,t){t.k&&(i.r[n]={ia:t.ia,Ga:t.Ga,na:t.na},t.k())}),i.s=!0,this.notifySubscribers(n,"asleep"))},Na:function(){var n=this[h];return n.s&&(n.S||this.Qa())&&this.aa(),s.J.fn.Na.call(this)}},ot={sa:function(n){"change"!=n&&"beforeChange"!=n||this.t()}};s.a.ka&&s.a.Xa(c,s.J.fn);d=s.N.gd;s.m[d]=s.N;c[d]=s.m;s.Xc=function(n){return s.Oa(n,s.m)};s.Yc=function(n){return s.Oa(n,s.m)&&n[h]&&n[h].Va};s.b("computed",s.m);s.b("dependentObservable",s.m);s.b("isComputed",s.Xc);s.b("isPureComputed",s.Yc);s.b("computed.fn",c);s.G(c,"peek",c.t);s.G(c,"dispose",c.k);s.G(c,"isActive",c.ba);s.G(c,"getDependenciesCount",c.Aa);s.nc=function(n,t){return"function"==typeof n?s.m(n,t,{pure:!0}):(n=s.a.extend({},n),n.pure=!0,s.m(n,t))};s.b("pureComputed",s.nc),function(){function t(u,f,e){if(e=e||new i,u=f(u),"object"!=typeof u||null===u||u===n||u instanceof RegExp||u instanceof Date||u instanceof String||u instanceof Number||u instanceof Boolean)return u;var o=u instanceof Array?[]:{};return e.save(u,o),r(u,function(i){var r=f(u[i]),s;switch(typeof r){case"boolean":case"number":case"string":case"function":o[i]=r;break;case"object":case"undefined":s=e.get(r);o[i]=s!==n?s:t(r,f,e)}}),o}function r(n,t){if(n instanceof Array){for(var i=0;i<n.length;i++)t(i);"function"==typeof n.toJSON&&t("toJSON")}else for(i in n)t(i)}function i(){this.keys=[];this.Ib=[]}s.wc=function(n){if(0==arguments.length)throw Error("When calling ko.toJS, pass the object you want to convert.");return t(n,function(n){for(var t=0;s.H(n)&&10>t;t++)n=n();return n})};s.toJSON=function(n,t,i){return n=s.wc(n),s.a.Eb(n,t,i)};i.prototype={save:function(n,t){var i=s.a.o(this.keys,n);0<=i?this.Ib[i]=t:(this.keys.push(n),this.Ib.push(t))},get:function(t){return t=s.a.o(this.keys,t),0<=t?this.Ib[t]:n}}}();s.b("toJS",s.wc);s.b("toJSON",s.toJSON),function(){s.j={u:function(t){switch(s.a.A(t)){case"option":return!0===t.__ko__hasDomDataOptionValue__?s.a.e.get(t,s.d.options.xb):7>=s.a.C?t.getAttributeNode("value")&&t.getAttributeNode("value").specified?t.value:t.text:t.value;case"select":return 0<=t.selectedIndex?s.j.u(t.options[t.selectedIndex]):n;default:return t.value}},ha:function(t,i,r){switch(s.a.A(t)){case"option":switch(typeof i){case"string":s.a.e.set(t,s.d.options.xb,n);"__ko__hasDomDataOptionValue__"in t&&delete t.__ko__hasDomDataOptionValue__;t.value=i;break;default:s.a.e.set(t,s.d.options.xb,i);t.__ko__hasDomDataOptionValue__=!0;t.value="number"==typeof i?i:""}break;case"select":(""===i||null===i)&&(i=n);for(var f=-1,u=0,o=t.options.length,e;u<o;++u)if(e=s.j.u(t.options[u]),e==i||""==e&&i===n){f=u;break}(r||0<=f||i===n&&1<t.size)&&(t.selectedIndex=f);break;default:(null===i||i===n)&&(i="");t.value=i}}}}();s.b("selectExtensions",s.j);s.b("selectExtensions.readValue",s.j.u);s.b("selectExtensions.writeValue",s.j.ha);s.h=function(){function n(n){var c,u,i;n=s.a.$a(n);123===n.charCodeAt(0)&&(n=n.slice(1,-1));var a=[],h=n.match(t),o,r=[],l=0;if(h)for(h.push(","),c=0;u=h[c];++c){if(i=u.charCodeAt(0),44===i){if(0>=l){a.push(o&&r.length?{key:o,value:r.join("")}:{unknown:o||r.join("")});o=l=0;r=[];continue}}else if(58===i){if(!l&&!o&&1===r.length){o=r.pop();continue}}else 47===i&&c&&1<u.length?(i=h[c-1].match(f))&&!e[i[0]]&&(n=n.substr(n.indexOf(u)+1),h=n.match(t),h.push(","),c=-1,u="/"):40===i||123===i||91===i?++l:41===i||125===i||93===i?--l:o||r.length||34!==i&&39!==i||(u=u.slice(1,-1));r.push(u)}return a}var r=["true","false","null","undefined"],u=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,t=RegExp("\"(?:[^\"\\\\]|\\\\.)*\"|'(?:[^'\\\\]|\\\\.)*'|/(?:[^/\\\\]|\\\\.)*/w*|[^\\s:,/][^,\"'{}()/:[\\]]*[^\\s,\"'{}()/:[\\]]|[^\\s]","g"),f=/[\])"'A-Za-z0-9_$]+$/,e={"in":1,"return":1,"typeof":1},i={};return{ta:[],ea:i,yb:n,Ua:function(t,f){function e(n,t){var a,f;if(!l){if(f=s.getBindingHandler(n),f&&f.preprocess&&!(t=f.preprocess(t,n,e)))return;(f=i[n])&&(a=t,0<=s.a.o(r,a)?a=!1:(f=a.match(u),a=null===f?!1:f[1]?"Object("+f[1]+")"+f[2]:a),f=a);f&&o.push("'"+n+"':function(_z){"+a+"=_z}")}c&&(t="function(){return "+t+" }");h.push("'"+n+"':"+t)}f=f||{};var h=[],o=[],c=f.valueAccessors,l=f.bindingParams,a="string"==typeof t?n(t):t;return s.a.q(a,function(n){e(n.key||n.unknown,n.value)}),o.length&&e("_ko_property_writers","{"+o.join(",")+" }"),h.join(",")},ad:function(n,t){for(var i=0;i<n.length;i++)if(n[i].key==t)return!0;return!1},Ea:function(n,t,i,r,u){n&&s.H(n)?!s.Ba(n)||u&&n.t()===r||n(r):(n=t.get("_ko_property_writers"))&&n[i]&&n[i](r)}}}();s.b("expressionRewriting",s.h);s.b("expressionRewriting.bindingRewriteValidators",s.h.ta);s.b("expressionRewriting.parseObjectLiteral",s.h.yb);s.b("expressionRewriting.preProcessBindings",s.h.Ua);s.b("expressionRewriting._twoWayBindings",s.h.ea);s.b("jsonExpressionRewriting",s.h);s.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",s.h.Ua),function(){function n(n){return 8==n.nodeType&&e.test(i?n.text:n.nodeValue)}function r(n){return 8==n.nodeType&&o.test(i?n.text:n.nodeValue)}function u(t,i){for(var u=t,f=1,e=[];u=u.nextSibling;){if(r(u)&&(f--,0===f))return e;e.push(u);n(u)&&f++}if(!i)throw Error("Cannot find closing comment tag to match: "+t.nodeValue);return null}function f(n,t){var i=u(n,t);return i?0<i.length?i[i.length-1].nextSibling:n.nextSibling:null}var i=t&&"<!--test-->"===t.createComment("test").text,e=i?/^\x3c!--\s*ko(?:\s+([\s\S]+))?\s*--\x3e$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,o=i?/^\x3c!--\s*\/ko\s*--\x3e$/:/^\s*\/ko\s*$/,h={ul:!0,ol:!0};s.f={Z:{},childNodes:function(t){return n(t)?u(t):t.childNodes},xa:function(t){if(n(t)){t=s.f.childNodes(t);for(var i=0,r=t.length;i<r;i++)s.removeNode(t[i])}else s.a.ob(t)},da:function(t,i){if(n(t)){s.f.xa(t);for(var u=t.nextSibling,r=0,f=i.length;r<f;r++)u.parentNode.insertBefore(i[r],u)}else s.a.da(t,i)},mc:function(t,i){n(t)?t.parentNode.insertBefore(i,t.nextSibling):t.firstChild?t.insertBefore(i,t.firstChild):t.appendChild(i)},gc:function(t,i,r){r?n(t)?t.parentNode.insertBefore(i,r.nextSibling):r.nextSibling?t.insertBefore(i,r.nextSibling):t.appendChild(i):s.f.mc(t,i)},firstChild:function(t){return n(t)?!t.nextSibling||r(t.nextSibling)?null:t.nextSibling:t.firstChild},nextSibling:function(t){return n(t)&&(t=f(t)),t.nextSibling&&r(t.nextSibling)?null:t.nextSibling},Tc:n,pd:function(n){return(n=(i?n.text:n.nodeValue).match(e))?n[1]:null},kc:function(t){var o,i,u,e;if(h[s.a.A(t)]&&(o=t.firstChild,o))do if(1===o.nodeType){if(i=o.firstChild,u=null,i)do u?u.push(i):n(i)?(e=f(i,!0),e?i=e:u=[i]):r(i)&&(u=[i]);while(i=i.nextSibling);if(i=u)for(u=o.nextSibling,e=0;e<i.length;e++)u?t.insertBefore(i[e],u):t.appendChild(i[e])}while(o=o.nextSibling)}}}();s.b("virtualElements",s.f);s.b("virtualElements.allowedBindings",s.f.Z);s.b("virtualElements.emptyNode",s.f.xa);s.b("virtualElements.insertAfter",s.f.gc);s.b("virtualElements.prepend",s.f.mc);s.b("virtualElements.setDomNodeChildren",s.f.da),function(){s.Q=function(){this.Fc={}};s.a.extend(s.Q.prototype,{nodeHasBindings:function(n){switch(n.nodeType){case 1:return null!=n.getAttribute("data-bind")||s.g.getComponentNameForNode(n);case 8:return s.f.Tc(n);default:return!1}},getBindings:function(n,t){var i=this.getBindingsString(n,t),i=i?this.parseBindingsString(i,t,n):null;return s.g.Ob(i,n,t,!1)},getBindingAccessors:function(n,t){var i=this.getBindingsString(n,t),i=i?this.parseBindingsString(i,t,n,{valueAccessors:!0}):null;return s.g.Ob(i,n,t,!0)},getBindingsString:function(n){switch(n.nodeType){case 1:return n.getAttribute("data-bind");case 8:return s.f.pd(n);default:return null}},parseBindingsString:function(n,t,i,r){var u,f,e,h,c;try{return u=this.Fc,f=n+(r&&r.valueAccessors||""),(e=u[f])||(c="with($context){with($data||{}){return{"+s.h.Ua(n,r)+"}}}",h=new Function("$context","$element",c),e=u[f]=h),e(t,i)}catch(o){throw o.message="Unable to parse bindings.\nBindings value: "+n+"\nMessage: "+o.message,o;}}});s.Q.instance=new s.Q}();s.b("bindingProvider",s.Q),function(){function v(n){return function(){return n}}function u(n){return n()}function o(n){return s.a.Ca(s.l.w(n),function(t,i){return function(){return n()[i]}})}function y(n,t,i){return"function"==typeof n?o(n.bind(null,t,i)):s.a.Ca(n,v)}function p(n,t){return o(this.getBindings.bind(this,n,t))}function h(n,t,i){var r,u=s.f.firstChild(t),f=s.Q.instance,e=f.preprocessNode;if(e){for(;r=u;)u=s.f.nextSibling(r),e.call(f,r);u=s.f.firstChild(t)}for(;r=u;)u=s.f.nextSibling(r),c(n,r,i)}function c(n,t,i){var u=!0,r=1===t.nodeType;r&&s.f.kc(t);(r&&i||s.Q.instance.nodeHasBindings(t))&&(u=l(t,null,n,i).shouldBindDescendants);u&&!a[s.a.A(t)]&&h(n,t,!r)}function w(n){var i=[],r={},t=[];return s.a.D(n,function u(f){if(!r[f]){var e=s.getBindingHandler(f);e&&(e.after&&(t.push(f),s.a.q(e.after,function(i){if(n[i]){if(-1!==s.a.o(t,i))throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+t.join(", "));u(i)}}),t.length--),i.push({key:f,fc:e}));r[f]=!0}}),i}function l(t,i,r,e){var v=s.a.e.get(t,f),o,l,a,c;if(!i){if(v)throw Error("You cannot apply bindings multiple times to the same element.");s.a.e.set(t,f,!0)}if(!v&&e&&s.tc(t,r),i&&"function"!=typeof i)o=i;else{var y=s.Q.instance,b=y.getBindingAccessors||p,h=s.B(function(){return(o=i?i(r,t):b.call(y,t,r))&&r.P&&r.P(),o},null,{i:t});o&&h.ba()||(h=null)}return o&&(a=h?function(n){return function(){return u(h()[n])}}:function(n){return o[n]},c=function(){return s.a.Ca(h?h():o,u)},c.get=function(n){return o[n]&&u(a(n))},c.has=function(n){return n in o},e=w(o),s.a.q(e,function(i){var e=i.fc.init,h=i.fc.update,u=i.key;if(8===t.nodeType&&!s.f.Z[u])throw Error("The binding '"+u+"' cannot be used with virtual elements");try{"function"==typeof e&&s.l.w(function(){var i=e(t,a(u),c,r.$data,r);if(i&&i.controlsDescendantBindings){if(l!==n)throw Error("Multiple bindings ("+l+" and "+u+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");l=u}});"function"==typeof h&&s.B(function(){h(t,a(u),c,r.$data,r)},null,{i:t})}catch(f){throw f.message='Unable to process binding "'+u+": "+o[u]+'"\nMessage: '+f.message,f;}})),{shouldBindDescendants:l===n}}function t(n){return n&&n instanceof s.U?n:new s.U(n)}var a,f,e;s.d={};a={script:!0,textarea:!0,template:!0};s.getBindingHandler=function(n){return s.d[n]};s.U=function(t,i,r,u){var f=this,h="function"==typeof t&&!s.H(t),o,e=s.B(function(){var o=h?t():t,n=s.a.c(o);return i?(i.P&&i.P(),s.a.extend(f,i),e&&(f.P=e)):(f.$parents=[],f.$root=n,f.ko=s),f.$rawData=o,f.$data=n,r&&(f[r]=n),u&&u(f,i,n),f.$data},null,{wa:function(){return o&&!s.a.Qb(o)},i:!0});e.ba()&&(f.P=e,e.equalityComparer=null,o=[],e.Ac=function(t){o.push(t);s.a.F.oa(t,function(t){s.a.La(o,t);o.length||(e.k(),f.P=e=n)})})};s.U.prototype.createChildContext=function(n,t,i){return new s.U(n,this,t,function(n,t){n.$parentContext=t;n.$parent=t.$data;n.$parents=(t.$parents||[]).slice(0);n.$parents.unshift(n.$parent);i&&i(n)})};s.U.prototype.extend=function(n){return new s.U(this.P||this.$data,this,null,function(t,i){t.$rawData=i.$rawData;s.a.extend(t,"function"==typeof n?n():n)})};f=s.a.e.I();e=s.a.e.I();s.tc=function(n,t){if(2==arguments.length)s.a.e.set(n,e,t),t.P&&t.P.Ac(n);else return s.a.e.get(n,e)};s.Ja=function(n,i,r){return 1===n.nodeType&&s.f.kc(n),l(n,i,t(r),!0)};s.Dc=function(n,i,r){return r=t(r),s.Ja(n,y(i,r,n),r)};s.eb=function(n,i){1!==i.nodeType&&8!==i.nodeType||h(t(n),i,!0)};s.Rb=function(n,u){if(!i&&r.jQuery&&(i=r.jQuery),u&&1!==u.nodeType&&8!==u.nodeType)throw Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");u=u||r.document.body;c(t(n),u,!0)};s.kb=function(t){switch(t.nodeType){case 1:case 8:var i=s.tc(t);if(i)return i;if(t.parentNode)return s.kb(t.parentNode)}return n};s.Jc=function(t){return(t=s.kb(t))?t.$data:n};s.b("bindingHandlers",s.d);s.b("applyBindings",s.Rb);s.b("applyBindingsToDescendants",s.eb);s.b("applyBindingAccessorsToNode",s.Ja);s.b("applyBindingsToNode",s.Dc);s.b("contextFor",s.kb);s.b("dataFor",s.Jc)}(),function(n){function u(t,u){var e=i.hasOwnProperty(t)?i[t]:n,o;e?e.X(u):(e=i[t]=new s.J,e.X(u),f(t,function(n,u){var f=!(!u||!u.synchronous);r[t]={definition:n,Zc:f};delete i[t];o||f?e.notifySubscribers(n):s.Y.Wa(function(){e.notifySubscribers(n)})}),o=!0)}function f(n,i){t("getConfig",[n],function(r){r?t("loadComponent",[n,r],function(n){i(n,r)}):i(null,null)})}function t(i,r,u,f){var e,o,h;if(f||(f=s.g.loaders.slice(0)),e=f.shift(),e)if(o=e[i],o){if(h=!1,o.apply(e,r.concat(function(n){h?u(null):null!==n?u(n):t(i,r,u,f)}))!==n&&(h=!0,!e.suppressLoaderExceptions))throw Error("Component loaders must supply values by invoking the callback, not by returning values synchronously.");}else t(i,r,u,f);else u(null)}var i={},r={};s.g={get:function(t,i){var f=r.hasOwnProperty(t)?r[t]:n;f?f.Zc?s.l.w(function(){i(f.definition)}):s.Y.Wa(function(){i(f.definition)}):u(t,i)},Xb:function(n){delete r[n]},Jb:t};s.g.loaders=[];s.b("components",s.g);s.b("components.get",s.g.get);s.b("components.clearCachedDefinition",s.g.Xb)}(),function(){function l(n,t,r,f){function e(){0==--c&&f(o)}var o={},c=2,h=r.template;r=r.viewModel;h?u(t,h,function(t){s.g.Jb("loadTemplate",[n,t],function(n){o.template=n;e()})}):e();r?u(t,r,function(t){s.g.Jb("loadViewModel",[n,t],function(n){o[i]=n;e()})}):e()}function e(n,t,r){if("function"==typeof t)r(function(n){return new t(n)});else if("function"==typeof t[i])r(t[i]);else if("instance"in t){var u=t.instance;r(function(){return u})}else"viewModel"in t?e(n,t.viewModel,r):n("Unknown viewModel value: "+t)}function h(n){switch(s.a.A(n)){case"script":return s.a.ma(n.text);case"textarea":return s.a.ma(n.value);case"template":if(c(n.content))return s.a.ua(n.content.childNodes)}return s.a.ua(n.childNodes)}function c(n){return r.DocumentFragment?n instanceof DocumentFragment:n&&11===n.nodeType}function u(n,t,i){"string"==typeof t.require?o||r.require?(o||r.require)([t.require],i):n("Uses require, but no AMD loader is present"):i(t)}function f(n){return function(t){throw Error("Component '"+n+"': "+t);}}var n={},i;s.g.register=function(t,i){if(!i)throw Error("Invalid configuration for "+t);if(s.g.ub(t))throw Error("Component "+t+" is already registered");n[t]=i};s.g.ub=function(t){return n.hasOwnProperty(t)};s.g.od=function(t){delete n[t];s.g.Xb(t)};s.g.Zb={getConfig:function(t,i){i(n.hasOwnProperty(t)?n[t]:null)},loadComponent:function(n,t,i){var r=f(n);u(r,t,function(t){l(n,r,t,i)})},loadTemplate:function(n,i,u){if(n=f(n),"string"==typeof i)u(s.a.ma(i));else if(i instanceof Array)u(i);else if(c(i))u(s.a.V(i.childNodes));else if(i.element)if(i=i.element,r.HTMLElement?i instanceof HTMLElement:i&&i.tagName&&1===i.nodeType)u(h(i));else if("string"==typeof i){var e=t.getElementById(i);e?u(h(e)):n("Cannot find element with ID "+i)}else n("Unknown element type: "+i);else n("Unknown template value: "+i)},loadViewModel:function(n,t,i){e(f(n),t,i)}};i="createViewModel";s.b("components.register",s.g.register);s.b("components.isRegistered",s.g.ub);s.b("components.unregister",s.g.od);s.b("components.defaultLoader",s.g.Zb);s.g.loaders.push(s.g.Zb);s.g.Bc=n}(),function(){function n(n,t){var r=n.getAttribute("params");if(r){var r=i.parseBindingsString(r,t,n,{valueAccessors:!0,bindingParams:!0}),r=s.a.Ca(r,function(t){return s.m(t,null,{i:n})}),u=s.a.Ca(r,function(t){var i=t.t();return t.ba()?s.m({read:function(){return s.a.c(t())},write:s.Ba(i)&&function(n){t()(n)},i:n}):i});return u.hasOwnProperty("$raw")||(u.$raw=r),u}return{$raw:{}}}s.g.getComponentNameForNode=function(n){var t=s.a.A(n);if(s.g.ub(t)&&(-1!=t.indexOf("-")||"[object HTMLUnknownElement]"==""+n||8>=s.a.C&&n.tagName===t))return t};s.g.Ob=function(t,i,r,u){var f,e;if(1===i.nodeType&&(f=s.g.getComponentNameForNode(i),f)){if(t=t||{},t.component)throw Error('Cannot use the "component" binding on a custom element matching a component');e={name:f,params:n(i,r)};t.component=u?function(){return e}:e}return t};var i=new s.Q;9>s.a.C&&(s.g.register=function(n){return function(i){return t.createElement(i),n.apply(this,arguments)}}(s.g.register),t.createDocumentFragment=function(n){return function(){var t=n(),i=s.g.Bc;for(var r in i)i.hasOwnProperty(r)&&t.createElement(r);return t}}(t.createDocumentFragment))}(),function(n){function t(n,t,i){if(t=t.template,!t)throw Error("Component '"+n+"' has no template");n=s.a.ua(t);s.f.da(i,n)}function i(n,t,i,r){var u=n.createViewModel;return u?u.call(n,r,{element:t,templateNodes:i}):r}var r=0;s.d.component={init:function(u,f,e,o,h){function a(){var n=c&&c.dispose;"function"==typeof n&&n.call(c);l=c=null}var c,l,v=s.a.V(s.f.childNodes(u));return s.a.F.oa(u,a),s.m(function(){var o=s.a.c(f()),e,y,p;if("string"==typeof o?e=o:(e=s.a.c(o.name),y=s.a.c(o.params)),!e)throw Error("No component name specified");p=l=++r;s.g.get(e,function(r){if(l===p){if(a(),!r)throw Error("Unknown component '"+e+"'");t(e,r,u);var f=i(r,u,v,y);r=h.createChildContext(f,n,function(n){n.$component=f;n.$componentTemplateNodes=v});c=f;s.eb(r,u)}})},null,{i:u}),{controlsDescendantBindings:!0}}};s.f.Z.component=!0}();g={"class":"className","for":"htmlFor"};s.d.attr={update:function(t,i){var r=s.a.c(i())||{};s.a.D(r,function(i,r){r=s.a.c(r);var u=!1===r||null===r||r===n;u&&t.removeAttribute(i);8>=s.a.C&&i in g?(i=g[i],u?t.removeAttribute(i):t[i]=r):u||t.setAttribute(i,r.toString());"name"===i&&s.a.rc(t,u?"":r.toString())})}},function(){s.d.checked={after:["value","attr"],init:function(t,i,r){function l(){var l=t.checked,o=y?f():l,n,h;s.va.Sa()||e&&!l||(n=s.l.w(i),u?(h=a?n.t():n,c!==o?(l&&(s.a.pa(h,o,!0),s.a.pa(h,c,!1)),c=o):s.a.pa(h,o,l),a&&s.Ba(n)&&n(h)):s.h.Ea(n,r,"checked",o,!0))}function v(){var n=s.a.c(i());t.checked=u?0<=s.a.o(n,f()):h?n:f()===n}var f=s.nc(function(){return r.has("checkedValue")?s.a.c(r.get("checkedValue")):r.has("value")?s.a.c(r.get("value")):t.value}),h="checkbox"==t.type,e="radio"==t.type;if(h||e){var o=i(),u=h&&s.a.c(o)instanceof Array,a=!(u&&o.push&&o.splice),c=u?f():n,y=e||u;e&&!t.name&&s.d.uniqueName.init(t,function(){return!0});s.m(l,null,{i:t});s.a.p(t,"click",l);s.m(v,null,{i:t});o=n}}};s.h.ea.checked=!0;s.d.checkedValue={update:function(n,t){n.value=s.a.c(t())}}}();s.d.css={update:function(n,t){var i=s.a.c(t());null!==i&&"object"==typeof i?s.a.D(i,function(t,i){i=s.a.c(i);s.a.bb(n,t,i)}):(i=s.a.$a(String(i||"")),s.a.bb(n,n.__ko__cssValue,!1),n.__ko__cssValue=i,s.a.bb(n,i,!0))}};s.d.enable={update:function(n,t){var i=s.a.c(t());i&&n.disabled?n.removeAttribute("disabled"):i||n.disabled||(n.disabled=!0)}};s.d.disable={update:function(n,t){s.d.enable.update(n,function(){return!s.a.c(t())})}};s.d.event={init:function(n,t,i,r,u){var f=t()||{};s.a.D(f,function(f){"string"==typeof f&&s.a.p(n,f,function(n){var o,h=t()[f],e;if(h){try{e=s.a.V(arguments);r=u.$data;e.unshift(r);o=h.apply(r,e)}finally{!0!==o&&(n.preventDefault?n.preventDefault():n.returnValue=!1)}!1===i.get(f+"Bubble")&&(n.cancelBubble=!0,n.stopPropagation&&n.stopPropagation())}})})}};s.d.foreach={ic:function(n){return function(){var i=n(),t=s.a.zb(i);return!t||"number"==typeof t.length?{foreach:i,templateEngine:s.W.sb}:(s.a.c(i),{foreach:t.data,as:t.as,includeDestroyed:t.includeDestroyed,afterAdd:t.afterAdd,beforeRemove:t.beforeRemove,afterRender:t.afterRender,beforeMove:t.beforeMove,afterMove:t.afterMove,templateEngine:s.W.sb})}},init:function(n,t){return s.d.template.init(n,s.d.foreach.ic(t))},update:function(n,t,i,r,u){return s.d.template.update(n,s.d.foreach.ic(t),i,r,u)}};s.h.ta.foreach=!1;s.f.Z.foreach=!0;s.d.hasfocus={init:function(n,t,i){function r(r){var u,f;if(n.__ko_hasfocusUpdating=!0,u=n.ownerDocument,"activeElement"in u){try{f=u.activeElement}catch(e){f=u.body}r=f===n}u=t();s.h.Ea(u,i,"hasfocus",r,!0);n.__ko_hasfocusLastValue=r;n.__ko_hasfocusUpdating=!1}var u=r.bind(null,!0),f=r.bind(null,!1);s.a.p(n,"focus",u);s.a.p(n,"focusin",u);s.a.p(n,"blur",f);s.a.p(n,"focusout",f)},update:function(n,t){var i=!!s.a.c(t());n.__ko_hasfocusUpdating||n.__ko_hasfocusLastValue===i||(i?n.focus():n.blur(),!i&&n.__ko_hasfocusLastValue&&n.ownerDocument.body.focus(),s.l.w(s.a.Da,null,[n,i?"focusin":"focusout"]))}};s.h.ea.hasfocus=!0;s.d.hasFocus=s.d.hasfocus;s.h.ea.hasFocus=!0;s.d.html={init:function(){return{controlsDescendantBindings:!0}},update:function(n,t){s.a.Cb(n,t())}};k("if");k("ifnot",!1,!0);k("with",!0,!1,function(n,t){return n.createChildContext(t)});w={};s.d.options={init:function(n){if("select"!==s.a.A(n))throw Error("options binding applies only to SELECT elements");for(;0<n.length;)n.remove(0);return{controlsDescendantBindings:!0}},update:function(t,i,r){function a(){return s.a.Ka(t.options,function(n){return n.selected})}function v(n,t,i){var r=typeof t;return"function"==r?t(n):"string"==r?n[t]:i}function y(n,i){if(o&&e)s.j.ha(t,s.a.c(r.get("value")),!0);else if(f.length){var u=0<=s.a.o(f,s.j.u(i[0]));s.a.sc(i[0],u);o&&!u&&s.l.w(s.a.Da,null,[t,"change"])}}var h=t.multiple,c=0!=t.length&&h?t.scrollTop:null,u=s.a.c(i()),e=r.get("valueAllowUnset")&&r.has("value"),p=r.get("optionsIncludeDestroyed"),l,f,o;i={};f=[];e||(h?f=s.a.fb(a(),s.j.u):0<=t.selectedIndex&&f.push(s.j.u(t.options[t.selectedIndex])));u&&("undefined"==typeof u.length&&(u=[u]),l=s.a.Ka(u,function(t){return p||t===n||null===t||!s.a.c(t._destroy)}),r.has("optionsCaption")&&(u=s.a.c(r.get("optionsCaption")),null!==u&&u!==n&&l.unshift(w)));o=!1;i.beforeRemove=function(n){t.removeChild(n)};u=y;r.has("optionsAfterRender")&&"function"==typeof r.get("optionsAfterRender")&&(u=function(t,i){y(0,i);s.l.w(r.get("optionsAfterRender"),null,[i[0],t!==w?t:n])});s.a.Bb(t,l,function(i,u,h){return h.length&&(f=!e&&h[0].selected?[s.j.u(h[0])]:[],o=!0),u=t.ownerDocument.createElement("option"),i===w?(s.a.Za(u,r.get("optionsCaption")),s.j.ha(u,n)):(h=v(i,r.get("optionsValue"),i),s.j.ha(u,s.a.c(h)),i=v(i,r.get("optionsText"),h),s.a.Za(u,i)),[u]},i,u);s.l.w(function(){e?s.j.ha(t,s.a.c(r.get("value")),!0):(h?f.length&&a().length<f.length:f.length&&0<=t.selectedIndex?s.j.u(t.options[t.selectedIndex])!==f[0]:f.length||0<=t.selectedIndex)&&s.a.Da(t,"change")});s.a.Nc(t);c&&20<Math.abs(c-t.scrollTop)&&(t.scrollTop=c)}};s.d.options.xb=s.a.e.I();s.d.selectedOptions={after:["options","foreach"],init:function(n,t,i){s.a.p(n,"change",function(){var u=t(),r=[];s.a.q(n.getElementsByTagName("option"),function(n){n.selected&&r.push(s.j.u(n))});s.h.Ea(u,i,"selectedOptions",r)})},update:function(n,t){if("select"!=s.a.A(n))throw Error("values binding applies only to SELECT elements");var i=s.a.c(t()),r=n.scrollTop;i&&"number"==typeof i.length&&s.a.q(n.getElementsByTagName("option"),function(n){var t=0<=s.a.o(i,s.j.u(n));n.selected!=t&&s.a.sc(n,t)});n.scrollTop=r}};s.h.ea.selectedOptions=!0;s.d.style={update:function(t,i){var r=s.a.c(i()||{});s.a.D(r,function(i,r){r=s.a.c(r);(null===r||r===n||!1===r)&&(r="");t.style[i]=r})}};s.d.submit={init:function(n,t,i,r,u){if("function"!=typeof t())throw Error("The value for a submit binding must be a function");s.a.p(n,"submit",function(i){var r,f=t();try{r=f.call(u.$data,n)}finally{!0!==r&&(i.preventDefault?i.preventDefault():i.returnValue=!1)}})}};s.d.text={init:function(){return{controlsDescendantBindings:!0}},update:function(n,t){s.a.Za(n,t())}};s.f.Z.text=!0,function(){if(r&&r.navigator)var t=function(n){if(n)return parseFloat(n[1])},e=r.opera&&r.opera.version&&parseInt(r.opera.version()),i=r.navigator.userAgent,o=t(i.match(/^(?:(?!chrome).)*version\/([^ ]*) safari/i)),h=t(i.match(/Firefox\/([^ ]*)/));if(10>s.a.C)var u=s.a.e.I(),f=s.a.e.I(),c=function(n){var t=this.activeElement;(t=t&&s.a.e.get(t,f))&&t(n)},l=function(n,t){var i=n.ownerDocument;s.a.e.get(i,u)||(s.a.e.set(i,u,!0),s.a.p(i,"selectionchange",c));s.a.e.set(n,f,t)};s.d.textInput={init:function(t,i,r){function u(n,i){s.a.p(t,n,i)}function p(){var r=s.a.c(i());(null===r||r===n)&&(r="");v!==n&&r===v?s.a.setTimeout(p,4):t.value!==r&&(y=r,t.value=r)}function c(){a||(v=t.value,a=s.a.setTimeout(f,4))}function f(){clearTimeout(a);v=a=n;var u=t.value;y!==u&&(y=u,s.h.Ea(i(),r,"textInput",u))}var y=t.value,a,v,w=9==s.a.C?c:f;10>s.a.C?(u("propertychange",function(n){"value"===n.propertyName&&w(n)}),8==s.a.C&&(u("keyup",f),u("keydown",f)),8<=s.a.C&&(l(t,w),u("dragend",c))):(u("input",f),5>o&&"textarea"===s.a.A(t)?(u("keydown",c),u("paste",c),u("cut",c)):11>e?u("keydown",c):4>h&&(u("DOMAutoComplete",f),u("dragdrop",f),u("drop",f)));u("change",f);s.m(p,null,{i:t})}};s.h.ea.textInput=!0;s.d.textinput={preprocess:function(n,t,i){i("textInput",n)}}}();s.d.uniqueName={init:function(n,t){if(t()){var i="ko_unique_"+ ++s.d.uniqueName.Ic;s.a.rc(n,i)}}};s.d.uniqueName.Ic=0;s.d.value={after:["options","foreach"],init:function(n,t,i){var o,h;if("input"!=n.tagName.toLowerCase()||"checkbox"!=n.type&&"radio"!=n.type){var r=["change"],u=i.get("valueUpdate"),f=!1,e=null;u&&("string"==typeof u&&(u=[u]),s.a.ra(r,u),r=s.a.Tb(r));o=function(){e=null;f=!1;var r=t(),u=s.j.u(n);s.h.Ea(r,i,"value",u)};!s.a.C||"input"!=n.tagName.toLowerCase()||"text"!=n.type||"off"==n.autocomplete||n.form&&"off"==n.form.autocomplete||-1!=s.a.o(r,"propertychange")||(s.a.p(n,"propertychange",function(){f=!0}),s.a.p(n,"focus",function(){f=!1}),s.a.p(n,"blur",function(){f&&o()}));s.a.q(r,function(t){var i=o;s.a.nd(t,"after")&&(i=function(){e=s.j.u(n);s.a.setTimeout(o,0)},t=t.substring(5));s.a.p(n,t,i)});h=function(){var r=s.a.c(t()),u=s.j.u(n),f;null!==e&&r===e?s.a.setTimeout(h,0):r!==u&&("select"===s.a.A(n)?(f=i.get("valueAllowUnset"),u=function(){s.j.ha(n,r,f)},u(),f||r===s.j.u(n)?s.a.setTimeout(u,0):s.l.w(s.a.Da,null,[n,"change"])):s.j.ha(n,r))};s.m(h,null,{i:n})}else s.Ja(n,{checkedValue:t})},update:function(){}};s.h.ea.value=!0;s.d.visible={update:function(n,t){var i=s.a.c(t()),r="none"!=n.style.display;i&&!r?n.style.display="":!i&&r&&(n.style.display="none")}},function(n){s.d[n]={init:function(t,i,r,u,f){return s.d.event.init.call(this,t,function(){var t={};return t[n]=i(),t},r,u,f)}}}("click");s.O=function(){};s.O.prototype.renderTemplateSource=function(){throw Error("Override renderTemplateSource");};s.O.prototype.createJavaScriptEvaluatorBlock=function(){throw Error("Override createJavaScriptEvaluatorBlock");};s.O.prototype.makeTemplateSource=function(n,i){if("string"==typeof n){i=i||t;var r=i.getElementById(n);if(!r)throw Error("Cannot find template with ID "+n);return new s.v.n(r)}if(1==n.nodeType||8==n.nodeType)return new s.v.qa(n);throw Error("Unknown template type: "+n);};s.O.prototype.renderTemplate=function(n,t,i,r){return n=this.makeTemplateSource(n,r),this.renderTemplateSource(n,t,i,r)};s.O.prototype.isTemplateRewritten=function(n,t){return!1===this.allowTemplateRewriting?!0:this.makeTemplateSource(n,t).data("isRewritten")};s.O.prototype.rewriteTemplate=function(n,t,i){n=this.makeTemplateSource(n,i);t=t(n.text());n.text(t);n.data("isRewritten",!0)};s.b("templateEngine",s.O);s.Gb=function(){function n(n,t,i,r){var o,f,u,e;for(n=s.h.yb(n),o=s.h.ta,f=0;f<n.length;f++)if(u=n[f].key,o.hasOwnProperty(u))if(e=o[u],"function"==typeof e){if(u=e(n[f].value))throw Error(u);}else if(!e)throw Error("This template engine does not support the '"+u+"' binding within its templates");return i="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+s.h.Ua(n,{valueAccessors:!0})+" } })()},'"+i.toLowerCase()+"')",r.createJavaScriptEvaluatorBlock(i)+t}var t=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'|[^>]*))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,i=/\x3c!--\s*ko\b\s*([\s\S]*?)\s*--\x3e/g;return{Oc:function(n,t,i){t.isTemplateRewritten(n,i)||t.rewriteTemplate(n,function(n){return s.Gb.dd(n,t)},i)},dd:function(r,u){return r.replace(t,function(t,i,r,f,e){return n(e,i,r,u)}).replace(i,function(t,i){return n(i,"<!-- ko -->","#comment",u)})},Ec:function(n,t){return s.M.wb(function(i,r){var u=i.nextSibling;u&&u.nodeName.toLowerCase()===t&&s.Ja(u,n,r)})}}}();s.b("__tr_ambtns",s.Gb.Ec),function(){var i,t;s.v={};s.v.n=function(n){if(this.n=n){var t=s.a.A(n);this.ab="script"===t?1:"textarea"===t?2:"template"==t&&n.content&&11===n.content.nodeType?3:4}};s.v.n.prototype.text=function(){var n=1===this.ab?"text":2===this.ab?"value":"innerHTML",t;if(0==arguments.length)return this.n[n];t=arguments[0];"innerHTML"===n?s.a.Cb(this.n,t):this.n[n]=t};i=s.a.e.I()+"_";s.v.n.prototype.data=function(n){if(1===arguments.length)return s.a.e.get(this.n,i+n);s.a.e.set(this.n,i+n,arguments[1])};t=s.a.e.I();s.v.n.prototype.nodes=function(){var i=this.n;if(0==arguments.length)return(s.a.e.get(i,t)||{}).jb||(3===this.ab?i.content:4===this.ab?i:n);s.a.e.set(i,t,{jb:arguments[0]})};s.v.qa=function(n){this.n=n};s.v.qa.prototype=new s.v.n;s.v.qa.prototype.text=function(){if(0==arguments.length){var i=s.a.e.get(this.n,t)||{};return i.Hb===n&&i.jb&&(i.Hb=i.jb.innerHTML),i.Hb}s.a.e.set(this.n,t,{Hb:arguments[0]})};s.b("templateSources",s.v);s.b("templateSources.domElement",s.v.n);s.b("templateSources.anonymousTemplate",s.v.qa)}(),function(){function t(n,t,i){var r;for(t=s.f.nextSibling(t);n&&(r=n)!==t;)n=s.f.nextSibling(r),i(r,n)}function f(n,i){if(n.length){var r=n[0],u=n[n.length-1],f=r.parentNode,e=s.Q.instance,o=e.preprocessNode;if(o){if(t(r,u,function(n,t){var f=n.previousSibling,i=o.call(e,n);i&&(n===r&&(r=i[0]||t),n===u&&(u=i[i.length-1]||f))}),n.length=0,!r)return;r===u?n.push(r):(n.push(r,u),s.a.za(n,f))}t(r,u,function(n){1!==n.nodeType&&8!==n.nodeType||s.Rb(i,n)});t(r,u,function(n){1!==n.nodeType&&8!==n.nodeType||s.M.yc(n,[i])});s.a.za(n,f)}}function i(n){return n.nodeType?n:0<n.length?n[0]:null}function e(n,t,u,e,o){o=o||{};var h=(n&&i(n)||u||{}).ownerDocument,c=o.templateEngine||r;if(s.Gb.Oc(u,c,h),u=c.renderTemplate(u,e,o,h),"number"!=typeof u.length||0<u.length&&"number"!=typeof u[0].nodeType)throw Error("Template engine must return an array of DOM nodes");h=!1;switch(t){case"replaceChildren":s.f.da(n,u);h=!0;break;case"replaceNode":s.a.qc(n,u);h=!0;break;case"ignoreTargetNode":break;default:throw Error("Unknown renderMode: "+t);}return h&&(f(u,e),o.afterRender&&s.l.w(o.afterRender,null,[u,e.$data])),u}function o(n,t,i){return s.H(n)?n():"function"==typeof n?n(t,i):n}var r,u;s.Db=function(t){if(t!=n&&!(t instanceof s.O))throw Error("templateEngine must inherit from ko.templateEngine");r=t};s.Ab=function(t,u,f,h,c){if(f=f||{},(f.templateEngine||r)==n)throw Error("Set a template engine before calling renderTemplate");if(c=c||"replaceChildren",h){var l=i(h);return s.B(function(){var n=u&&u instanceof s.U?u:new s.U(s.a.c(u)),r=o(t,n.$data,n),n=e(h,c,r,n,f);"replaceNode"==c&&(h=n,l=i(h))},null,{wa:function(){return!l||!s.a.nb(l)},i:l&&"replaceNode"==c?l.parentNode:l})}return s.M.wb(function(n){s.Ab(t,u,f,n,"replaceNode")})};s.kd=function(t,i,r,u,h){function l(n,t){f(t,c);r.afterRender&&r.afterRender(t,n);c=null}function a(n,i){c=h.createChildContext(n,r.as,function(n){n.$index=i});var u=o(t,n,c);return e(null,"ignoreTargetNode",u,c,r)}var c;return s.B(function(){var t=s.a.c(i)||[];"undefined"==typeof t.length&&(t=[t]);t=s.a.Ka(t,function(t){return r.includeDestroyed||t===n||null===t||!s.a.c(t._destroy)});s.l.w(s.a.Bb,null,[u,t,a,r,l])},null,{i:u})};u=s.a.e.I();s.d.template={init:function(n,t){var i=s.a.c(t());if("string"==typeof i||i.name)s.f.xa(n);else{if("nodes"in i){if(i=i.nodes||[],s.H(i))throw Error('The "nodes" option must be a plain, non-observable array.');}else i=s.f.childNodes(n);i=s.a.jc(i);new s.v.qa(n).nodes(i)}return{controlsDescendantBindings:!0}},update:function(t,i,r,f,e){var h=i(),o;i=s.a.c(h);r=!0;f=null;"string"==typeof i?i={}:(h=i.name,"if"in i&&(r=s.a.c(i["if"])),r&&"ifnot"in i&&(r=!s.a.c(i.ifnot)),o=s.a.c(i.data));"foreach"in i?f=s.kd(h||t,r&&i.foreach||[],i,t,e):r?(e="data"in i?e.createChildContext(o,i.as):e,f=s.Ab(h||t,e,i,t)):s.f.xa(t);e=f;(o=s.a.e.get(t,u))&&"function"==typeof o.k&&o.k();s.a.e.set(t,u,e&&e.ba()?e:n)}};s.h.ta.template=function(n){return n=s.h.yb(n),1==n.length&&n[0].unknown||s.h.ad(n,"name")?null:"This template engine does not support anonymous templates nested within its templates"};s.f.Z.template=!0}();s.b("setTemplateEngine",s.Db);s.b("renderTemplate",s.Ab);s.a.dc=function(n,t,i){if(n.length&&t.length)for(var o,r,f,e,u=o=0;(!i||u<i)&&(f=n[o]);++o){for(r=0;e=t[r];++r)if(f.value===e.value){f.moved=e.index;e.moved=f.index;t.splice(r,1);u=r=0;break}u+=r}};s.a.ib=function(){function n(n,t,i,r,u){for(var o=Math.min,l=Math.max,a=[],c=n.length,f,h=t.length,v=h-c||1,w=c+h+1,y,p,b,e=0;e<=c;e++)for(p=y,a.push(y=[]),b=o(h,e+v),f=l(0,e-1);f<=b;f++)y[f]=f?e?n[e-1]===t[f-1]?p[f-1]:o(p[f]||w,y[f-1]||w)+1:f+1:e+1;for(o=[],l=[],v=[],e=c,f=h;e||f;)h=a[e][f]-1,f&&h===a[e][f-1]?l.push(o[o.length]={status:i,value:t[--f],index:f}):e&&h===a[e-1][f]?v.push(o[o.length]={status:r,value:n[--e],index:e}):(--f,--e,u.sparse||o.push({status:"retained",value:t[f]}));return s.a.dc(v,l,!u.dontLimitMoves&&10*c),o.reverse()}return function(t,i,r){return r="boolean"==typeof r?{dontLimitMoves:r}:r||{},t=t||[],i=i||[],t.length<i.length?n(t,i,"added","deleted",r):n(i,t,"deleted","added",r)}}();s.b("utils.compareArrays",s.a.ib),function(){function r(t,i,r,u,f){var e=[],o=s.B(function(){var n=i(r,f,s.a.za(e,t))||[];0<e.length&&(s.a.qc(e,n),u&&s.l.w(u,null,[r,n,f]));e.length=0;s.a.ra(e,n)},null,{i:t,wa:function(){return!s.a.Qb(e)}});return{ca:e,B:o.ba()?o:n}}var t=s.a.e.I(),i=s.a.e.I();s.a.Bb=function(u,f,e,o,h){function ut(n,t){c=g[t];tt!==t&&(rt[n]=c);c.qb(tt++);s.a.za(c.ca,u);w.push(c);b.push(c)}function y(n,t){if(n)for(var i=0,r=t.length;i<r;i++)t[i]&&s.a.q(t[i].ca,function(r){n(r,i,t[i].ja)})}var l,p,ft;f=f||[];o=o||{};var p=s.a.e.get(u,t)===n,g=s.a.e.get(u,t)||[],nt=s.a.fb(g,function(n){return n.ja}),a=s.a.ib(nt,f,o.dontLimitMoves),w=[],v=0,tt=0,it=[],b=[];f=[];for(var rt=[],nt=[],c,l=0,k,d;k=a[l];l++)switch(d=k.moved,k.status){case"deleted":d===n&&(c=g[v],c.B&&(c.B.k(),c.B=n),s.a.za(c.ca,u).length&&(o.beforeRemove&&(w.push(c),b.push(c),c.ja===i?c=null:f[l]=c),c&&it.push.apply(it,c.ca)));v++;break;case"retained":ut(l,v++);break;case"added":d!==n?ut(l,d):(c={ja:k.value,qb:s.N(tt++)},w.push(c),b.push(c),p||(nt[l]=c))}for(s.a.e.set(u,t,w),y(o.beforeMove,rt),s.a.q(it,o.beforeRemove?s.$:s.removeNode),l=0,p=s.f.firstChild(u);c=b[l];l++){for(c.ca||s.a.extend(c,r(u,e,c.ja,h,c.qb)),v=0;a=c.ca[v];p=a.nextSibling,ft=a,v++)a!==p&&s.f.gc(u,a,ft);!c.Wc&&h&&(h(c.ja,c.ca,c.qb),c.Wc=!0)}for(y(o.beforeRemove,f),l=0;l<f.length;++l)f[l]&&(f[l].ja=i);y(o.afterMove,rt);y(o.afterAdd,nt)}}();s.b("utils.setDomNodeChildrenFromArrayMapping",s.a.Bb);s.W=function(){this.allowTemplateRewriting=!1};s.W.prototype=new s.O;s.W.prototype.renderTemplateSource=function(n,t,i,r){return(t=(9>s.a.C?0:n.nodes)?n.nodes():null)?s.a.V(t.cloneNode(!0).childNodes):(n=n.text(),s.a.ma(n,r))};s.W.sb=new s.W;s.Db(s.W.sb);s.b("nativeTemplateEngine",s.W),function(){s.vb=function(){var n=this.$c=function(){if(!i||!i.tmpl)return 0;try{if(0<=i.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch(n){}return 1}();this.renderTemplateSource=function(r,u,f,e){if(e=e||t,f=f||{},2>n)throw Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.");var o=r.data("precompiled");return o||(o=r.text()||"",o=i.template(null,"{{ko_with $item.koBindingContext}}"+o+"{{/ko_with}}"),r.data("precompiled",o)),r=[u.$data],u=i.extend({koBindingContext:u},f.templateOptions),u=i.tmpl(o,r,u),u.appendTo(e.createElement("div")),i.fragments={},u};this.createJavaScriptEvaluatorBlock=function(n){return"{{ko_code ((function() { return "+n+" })()) }}"};this.addTemplate=function(n,i){t.write("<script type='text/html' id='"+n+"'>"+i+"<\/script>")};0<n&&(i.tmpl.tag.ko_code={open:"__.push($1 || '');"},i.tmpl.tag.ko_with={open:"with($1) {",close:"} "})};s.vb.prototype=new s.O;var n=new s.vb;0<n.$c&&s.Db(n);s.b("jqueryTmplTemplateEngine",s.vb)}()})})()})();